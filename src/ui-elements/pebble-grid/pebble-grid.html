<link rel="import" href="../iron-data-table/iron-data-table.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-input/paper-textarea.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
<link rel="import" href="../paper-radio-button/paper-radio-button.html">

<!--
`pebble-grid`
Grid control for riversand ui framework

@demo demo/index.html 
-->

<dom-module id="pebble-grid">
    <template>
        <style include="shared-styles">
            #viewMode {
                float: right;
                padding: 0 20px 0 0;
                width: 110px;
            }
            
            h1 {
                text-align: center;
            }
            
            div.clearboth {
                clear: both;
            }
        </style>
        <style is="custom-style">
            iron-data-table {
                --iron-data-table-row: {
                    align-items: center;
                }
                --iron-data-table-header: {
                    background-color: #139DE6;
                    height: 45px;
                    color: white;
                }
                --iron-data-table-row-odd: {
                    background-color: #FFFFFF;
                }
                --iron-data-table-row-even: {
                    background-color: #F9FBFD;
                }
            }
            
            .input-content.paper-input-container .paper-input-label {
                color: white !important;
            }
        </style>
        <paper-dropdown-menu id="viewMode" label="View Mode" vertical-align="top" horizontal-align="left">
            <paper-listbox class="dropdown-content" attr-for-selected="selecteditem" selected="{{data.config.viewMode}}">
                <paper-item selecteditem="tabular">Tabular</paper-item>
                <paper-item selecteditem="tile">Tile</paper-item>
                <paper-item selecteditem="list">List</paper-item>
            </paper-listbox>
        </paper-dropdown-menu>
        <div class="clearboth"></div>

        <template is="dom-if" if="{{_isTabularMode(data.config.viewMode)}}">
            <iron-data-table page-size="10" selection-enabled multi-selection$="{{data.config.isMultiSelect}}" items="{{data.dataItems}}">
                <template is="dom-repeat" items="[[data.tabular.columns]]" as="col">
                    <data-table-column name="[[col.header]]" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
                        <template>
                            <template is="dom-if" if="[[_isCheckBox(col)]]">
                                <paper-checkbox checked$="{{_columnValue(item, col.name)}}"></paper-checkbox>
                            </template>
                            <template is="dom-if" if="[[_isTextArea(col)]]">
                                <paper-textarea value="{{_columnValue(item, col.name)}} "></paper-textarea>
                            </template>
                            <template is="dom-if" if="[[_isRadioButton(col)]]">
                                <paper-radio-button checked$="{{_columnValue(item, col.name)}}"></paper-radio-button>
                            </template>
                            <template is="dom-if" if="[[_isTextBox(col)]]">
                                <paper-input value="{{_columnValue(item, col.name)}}"></paper-input>
                            </template>
                            <template is="dom-if" if="[[_isNotEditable(col)]]">
                                {{_columnValue(item, col.name)}}
                            </template>
                        </template>
                    </data-table-column>
                </template>
            </iron-data-table>
        </template>
        <template is="dom-if" if="{{_isTileMode(data.config.viewMode)}}">
            <h1>Under Design</h1>
        </template>
        <template is="dom-if" if="{{_isListMode(data.config.viewMode)}}">
            <h1>Under Design</h1>
        </template>
    </template>
    <script> 
    var index = 0;
   
    (function() {
                'use strict';
                
                Polymer( {
                    is: 'pebble-grid', 
                    properties: {
                        data: {
                          type: Object
                        }
                    },
                    _columnValue: function(gridData, columnName) {
                        if(gridData.hasOwnProperty(columnName)){
                           return gridData[columnName];
                        }
                        // if(index == this.data.tabular.columns.length){
                        //     index = 0;
                        // }
                        // var cellData = gridData[this.data.tabular.columns[index].name];
                        // if(cellData != undefined) {
                        //    index++;
                        // }
                        // return cellData;
                        // if(item.hasOwnProperty(columnName)){
                        //   return item[columnName];
                        // }
                        // return '';
                     },
                     _isTabularMode: function(viewMode){
                         return viewMode == 'tabular';
                     },
                     _isTileMode: function(viewMode){
                         return viewMode == 'tile';
                     },
                     _isListMode: function(viewMode){
                         return viewMode == 'list';
                     },
                     _isTextBox: function(col){
                         return col.editType == 'text';
                     },
                     _isCheckBox: function(col){
                         return col.editType == 'checkbox';
                     }, 
                     _isTextArea: function(col){
                         return col.editType == 'textarea';
                     },
                      _isRadioButton: function(col){
                         return col.editType == 'radio';
                     },
                     _isNotEditable: function(col){
                         return col.editType == '';
                     },
                     _isFilterEnabled: function(col){
                         return col.filterable ? col.name : undefined;
                     },
                      _isSortable: function(col){
                         return col.sortable ? col.name : undefined;
                     }

                });
            }
            
            )();
            
            </script>
</dom-module>
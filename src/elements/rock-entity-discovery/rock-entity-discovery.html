<link rel="import" href="../rock-layout/rock-layout.html">
<link rel="import" href="../rock-layout/rock-header/rock-header.html">
<link rel="import" href="../rock-layout/rock-header-sidebar/rock-header-sidebar.html">
<link rel="import" href="../pebble-grid/demo/demo-grid-element.html">
<link rel="import" href="../rock-search-bar/rock-search-bar.html">
<link rel="import" href="../rock-search-filter/rock-search-filter.html">

<dom-module id="rock-entity-discovery">
  <template>
    <style include="shared-styles"></style>
    <style is="custom-style">
      #searchBar {
        width: 700px;
        margin-top: 15px;
        display: inline-flex;
      }
      
      #search-filter {
        margin-top: 16px;
        vertical-align: sub;
      }
      
      pebble-button.iconButton {
        --pebble-button: {
          height: 28px;
          min-width: 0.5em;
          padding: 0.2em 0.2em 0.3em 0.2em;
          vertical-align: middle;
        }
      }
      
      #savedSearches {
        --pebble-button: {
          height: 30px;
          padding: 1em 0.5em 1em 0.5em;
          vertical-align: middle;
          color: blue;
        }
      }
      
      .header-logo-container {
        margin-top: 25px;
        margin-left: 10px;
      }
    </style>
    <rock-layout>
      <rock-header align="right">
        <rock-header-sidebar class="rock-header-left-sidebar" align="left">
          <div class="fixed-content header-logo-container">
            <pebble-main-logo logo-url="../../src/images/logo.svg" on-logo-click="onLogoClick"></pebble-main-logo>
          </div>
          <div class="shrunk-content">
            <pebble-tenant-logo logo-url="../../src/images/Beiersdorf_Logo.svg"></pebble-tenant-logo>
          </div>
        </rock-header-sidebar>
        <div class="fixed-content">
          <rock-search-bar id="searchBar" placeholder="Enter Search text"></rock-search-bar>
          <rock-search-filter id="search-filter" style="display:none;"></rock-search-filter>
          <pebble-button id="filterList" class="iconButton" icon="filter-list" raised></pebble-button>
          <pebble-button id="savedSearches" class="iconTextButton" icon="history" button-text="Saved Searches" noink raised elevation="2"></pebble-button>
          <!--<div id="search-criteria" class="search-criteria">
            
          </div>-->
        </div>
        <div class="shrunk-content">
        </div>

      </rock-header>
      <iron-ajax auto url="../../data/EntitySearchApp/gridConfig.json" handle-as="json" last-response="{{gridConfig}}"></iron-ajax>
      <iron-ajax auto url="../../data/EntitySearchApp/gridData.json" handle-as="json" last-response="{{gridData}}"></iron-ajax>
      <pebble-grid id="entityGrid" config="{{gridConfig}}" page-size="10" size="{{gridData.length}}" data="{{gridData}}"></pebble-grid>
    </rock-layout>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'rock-entity-discovery',
        ready: function(){
          this.$$("#searchBar").searchInput = [
                {
                  "name": "Brand",
                  "value": "Levis"
                },
                {
                  "name": "Color",
                  "value": "Red"
                },
                {
                  "name": "Size",
                  "value": "Medium"
                },
                {
                  "name": "Name",
                  "value": "Extreme"
                }
          ];

           this.$$('#search-filter').tags = [
            {
              "name": "Brand",
              "value": "Levis",
              "editMode": false
            },
            {
              "name": "Color",
              "value": "Red",
              "editMode": false
            },
            {
              "name": "Size",
              "value": "Medium",
              "editMode": false
            }
          ];
          var _this = this;

          this.$$("#filterList").addEventListener('click', function(e) {
            if(_this.$$("#search-filter").style.display != "none"){
              _this.$$("#search-filter").style.display = "none";
            } else {
              _this.$$("#search-filter").style.display = "inline-flex";
            }
            if(_this.$$("#searchBar").style.display != "none"){
              _this.$$("#searchBar").style.display = "none";
            }
            else {
              _this.$$("#searchBar").style.display = "inline-flex";
            }
           
          });
         
        },
         properties: {
          
         }
      });
    })();
  </script>

</dom-module>
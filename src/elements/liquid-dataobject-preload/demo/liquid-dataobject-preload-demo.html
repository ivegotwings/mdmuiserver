<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../liquid-dataobject-preload.html">
<link rel="import" href="../../bedrock-helpers/context-helper.html">

<dom-module id="liquid-dataobject-preload-demo">
    <template>
        <liquid-dataobject-preload id="liquidDataObjectPreLoad" verbose on-dataobject-preload-completed="_onPreLoadCompleted"
            on-error="_onPreLoadFailed"></liquid-dataobject-preload>
    </template>
    <script>
        (function () {
            'use strict';
            Polymer({
                is: 'liquid-dataobject-preload-demo',
                attached: function () {
                    //var liquidElement1 = this.shadowRoot.querySelector("[id=entityGetData3]");
                    //liquidElement1.generateRequest();
                },
                properties: {
                    auto: {
                        type: Boolean,
                        value: false
                    }
                },
                generateRequest: function () {
                    var contextData = {};
                    contextData[ContextHelper.CONTEXT_TYPE_USER] = 
                    [
                        {
                            'user': 'vishal.jariwala@riversand.com', 
                            'role': 'vendor',
                            "tenant": 'riverworks'
                        }
                    ];
                    
                    var liquidDataObjectPreLoad = this.shadowRoot.querySelector('#liquidDataObjectPreLoad');
                    liquidDataObjectPreLoad.contextData = contextData;
                    liquidDataObjectPreLoad.generateRequest();
                },
                _onPreLoadCompleted: function (e) {
                    console.log('pre-load completed response ', JSON.stringify(e, null, 4));
                },
                _onPreLoadFailed: function (e) {
                    Polymer.Base._error('pre-load failure ', JSON.stringify(e.detail.response, null, 4));
                }
            });
        })();
    </script>
</dom-module>

<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="../pebble-button/pebble-button.html" />
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">
<link rel="import" href="../pebble-styles-app/pebble-styles-app.html">
<link rel="import" href="../pebble-main-logo/pebble-main-logo.html">

<dom-module id="pebble-login">
<style is="custom-style" include="pebble-styles-shared">
            
            pebble-button::shadow paper-button{
                background-color:var(--button-bg-color);
                color:var(--button-text-color);
                width: 86px;
                height: 30px;
                border-radius: 3px;
                @apply(--pebble-login-button);
            }

            .forgot-div {
                text-align: right;
                font-size: 12px;
                color: #026bc3;
                cursor: pointer;
            }
</style>
<style is="custom-style" include="pebble-styles-app"></style>
<template>
    <div class="login">
        <div class="mask">
            <div class="loginlogo">
                <pebble-main-logo logo-url="/src/images/logo.svg" on-logo-click="onLogoClick">
                </pebble-main-logo>
            </div>
            <div class="login-Content">
                <div class="login-Div">
                    <input id="username" type="text" placeholder="UserName" value="{{userName::input}}" />
                </div>
                <div class="login-Div">
                    <input id="password" type="password" placeholder="Password" value="{{password::input}}" on-keyup="_loginOnEnter"/>
                </div>
                <div class="forgot-div">
                    <span on-tap="_onForgotTap">Forgot Password</span>
                </div>
                <div>
                    <input type="checkbox" class="login-Checkbox" checked="{{isStaySignedIn::change}}" />
                    <span class="login-Text">Stay Signed in</span>
                    <pebble-button id="loginButton" button-text="Login" raised on-tap="_onTapLogin"></pebble-button>
                </div>
            </div>
            <div class="footerbg">
            </div>
            <div class="copyright">A product by Riversand Copyright @ Riversand 2017</div>
        </div>
    </div>
</template>
<script>
        Polymer({
            is: "pebble-login",
            properties: {
                /**
                 * Indicates user name
                 */
                userName: {
                    type: String,
                    value: null
                },

                /**
                 * Indicates password
                 */
                password: {
                    type: String,
                    value: null
                },

                /**
                 * Indicates is the user authenticated or not
                 */
                isAuthenticated: {
                    type: Boolean,
                    value: false,
                    notify: true
                },

                /**
                 * Indicates to store the credentials in cookies
                 */
                isStaySignedIn: {
                    type: Boolean,
                    value: false
                }
            },

            _onTapLogin: function () {
                this.isAuthenticated = this._isValid();

                var eventDetail = {
                        name: "login-tap",
                        data: {
                                "userName" : this.userName,
                                "password" : this.password,
                                "isStaySignedIn" : this.isStaySignedIn,
                                "isAuthenticated" : this.isAuthenticated
                              }
                    }

                this.fire('bedrock-event', eventDetail);

                if(this.isAuthenticated)
                {
                    this.userName = '';
                    this.password = '';
                    this.isStaySignedIn = false;
                    this.$$('#username').focus();
                }
            },

            _isValid: function () {
                if (this.userName == 'admin' && this.password == 'admin') {
                    return true;
                }

                return false;
            },

            _onForgotTap: function(){
                console.log('On forgot link clicked!!!');
            },

            _loginOnEnter: function (e) {
                if (e.keyCode === 13) {
                    this._onTapLogin();
                }
            }

        });
    </script>
</dom-module>
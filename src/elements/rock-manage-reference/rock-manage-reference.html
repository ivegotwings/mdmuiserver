<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/polymer/lib/utils/async.html">

<link rel="import" href="../bedrock-component-context-behavior/bedrock-component-context-behavior.html">
<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-helpers/data-helper.html">
<link rel="import" href="../bedrock-helpers/data-request-helper.html">
<link rel="import" href="../bedrock-helpers/entity-helper.html">
<link rel="import" href="../bedrock-helpers/data-transform-helper.html">
<link rel="import" href="../bedrock-pubsub/bedrock-pubsub.html">
<link rel="import" href="../bedrock-helpers/entity-helper.html">
<link rel="import" href="../bedrock-helpers/context-helper.html">
<link rel="import" href="../bedrock-helpers/attribute-helper.html">
<link rel="import" href="../bedrock-style-manager/styles/bedrock-style-common.html">


<link rel="import" href="../liquid-entity-model-composite-get/liquid-entity-model-composite-get.html">
<link rel="import" href="../liquid-entity-data-save/liquid-entity-data-save.html">
<link rel="import" href="../liquid-rest/liquid-rest.html">
<link rel="import" href="../liquid-config-get/liquid-config-get.html">
<link rel="import" href="../liquid-config-save/liquid-config-save.html">

<link rel="import" href="../pebble-file-upload/pebble-file-upload.html">
<link rel="import" href="../pebble-dialog/pebble-dialog.html">
<link rel="import" href="../pebble-icons/pebble-icons.html">
<link rel="import" href="../pebble-icon/pebble-icon.html">
<link rel="import" href="../pebble-image-viewer/pebble-image-viewer.html">
<link rel="import" href="../pebble-spinner/pebble-spinner.html">
<link rel="import" href="../pebble-checkbox/pebble-checkbox.html">
<link rel="import" href="../pebble-button/pebble-button.html">
<link rel="import" href="../pebble-popover/pebble-popover.html">

<link rel="import" href="../rock-grid/rock-grid.html">
<link rel="import" href="../rock-classification-tree/rock-classification-tree.html">
<link rel="import" href="../rock-entity-type-model-lov/rock-entity-type-model-lov.html">
<!--
<b><i>Content development is under progress... </b></i>

@demo demo/index.html
-->
<dom-module id="rock-manage-reference">
    <template>
        <style include="bedrock-style-common">
            .placeHolder {
                width: 880px;
                height: 400px;
                margin: 0 auto;
                box-shadow: 0 0 10px 0 var(--cloudy-blue-color, #c1cad4);
                position: relative;
            }

            #content-actions {
                padding-top: 30px;
                position: fixed;
                bottom: 0;
                background: rgba(255, 255, 255, 0.80);
                text-align: center;
                width: 100%;
                z-index: 9999;
            }

            #content-label {
                box-shadow: 0 1px 7px 0 var(--palette-cloudy-blue, #c1cad4);
                padding: 15px;
                margin: 10px;
            }

            #image-container {
                width: 30px;
                height: 35px;
                vertical-align: middle;
            }

            import-log {
                vertical-align: middle;
            }

            .title {
                font-size: var(--default-font-size, 14px);
                text-align: center;
                color: var(--palette-steel-grey, #75808b);
            }

            .checkbox-container {
                margin-right: 15%;
            }

            .checkbox-label-color {
                --pebble-checkbox-label-color: #75808b;
            }

            .confirmSave {
                font-size: 12px;
            }

            #categoryTreeContainer {
                height: 550px;
                overflow: auto;
            }

            .preview-message-container {
                margin-top: 5px;
            }

            .preview-message-info {
                font-size: 12px;
                margin-left: 15%;
            }
        </style>
<pebble-spinner active="[[_loading]]"></pebble-spinner>

<div id="content-entity-import">
    <div class="placeHolder p-10">
        <!--<div>
            <pebble-button id="actions" class="dropdownText btn dropdown-success m-r-5" button-text="{{_mainTitle}}" noink dropdown-icon
                on-tap="_onActionsTap"></pebble-button>
            <pebble-popover id="actionsPopover" for="actions" auto-fit-on-attach no-overlap horizontal-align="left">
                <rock-entity-type-model-lov domain="thing" id="referenceDataLov"></rock-entity-type-model-lov>
            </pebble-popover>
            <bedrock-pubsub event-name="entity-type-selection-changed" handler="_onReferenceDataChange" target-id="referenceDataLov"></bedrock-pubsub>
        </div>-->
        <p class="title">
            <a href="#" class="btn-link" on-tap="_exportDialogOpen">Download</a> existing Value Mappings or upload an existing
            value mapping file
        </p>
        <!-- screen for import -->
        <pebble-file-upload id="fileUpload" allowed-file-types="[[allowedFileTypes]]"></pebble-file-upload>
        <bedrock-pubsub event-name="pebble-file-upload-success" handler="_onFileUploadSuccess" target-id="fileUpload"></bedrock-pubsub>
    </div>
    <div class="preview-message-container">
        <span class="preview-message-info">* Previewing data can take some time.</span>
    </div>
</div>
</template>
<script>
        (function () {
            'use strict';

            Polymer({
                is: "rock-manage-reference",

                properties: {
                    appContextData: {
                        type: Object,
                        value: function () {
                            return {};
                        }
                    },

                    _copRequest: {
                        type: Object,
                        value: function () { return {}; }
                    },


                    _saveRequest: {
                        type: Object,
                        value: function () { return {}; }
                    },

                    _fileName: {
                        type: String
                    },
                    _currentBatchNumber: {
                        type: Number,
                        value: 0
                    },
                    _batchSize: {
                        type: Number,
                        value: 10
                    },
                    _loading: {
                        type: Boolean,
                        value: false
                    },
                    _downloadInProgress: {
                        type: Boolean,
                        value: false
                    },

                    _currentAction: {
                        type: String,
                        value: "create"
                    },
                    _showPreview: {
                        type: Boolean,
                        value: false
                    },
                    _isDirty: {
                        type: Boolean,
                        value: false
                    },
                    _workAutomationId: {
                        type: String
                    },

                    _currentCOPService: {
                        type: String,
                        value: "process"
                    },
                    /**
                      * <b><i>Content development is under progress... </b></i> 
                      */
                    skipNext: {
                        type: Boolean,
                        value: false
                    },
                    /**
                      * <b><i>Content development is under progress... </b></i> 
                      */
                    businessFunctionData: {
                        type: Object,
                        value: function () { return {}; }
                    },
                    allowedFileTypes: {
                        type: Array,
                        value: function () { return []; }
                    },
                    _fileDetails: {
                        type: Object,
                        value: function () { return {}; }
                    },
                    copContext: {
                        type: Object,
                        value: function () { return {}; }
                    }
                },
                observers: [
                ],
                behaviors: [
                    RUFBehaviors.UIBehavior,
                    RUFBehaviors.ComponentContextBehavior
                ]

                //Show a dropdown with complete reference list, similar to reference data dropdown
                //On downlod click without selecting reference data show an error message to select the referenceType
                //On triggering the process download all ther reference data 
                //Upload the reference data

            });
        })();
    </script>
</dom-module>
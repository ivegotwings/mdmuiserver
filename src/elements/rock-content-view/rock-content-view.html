<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-helpers/component-helper.html">

<link rel="import" href="../bedrock-style-manager/styles/bedrock-style-common.html">

<!--
` <rock-content-view> ` Represents a view that holds the content for the middle area of the application.
  It takes the configuration for the component that is rendered in the content view.
  It supports `minimize` and `close` actions that are configured using the boolean properties.
  Make sure to use the `rock-content-view` always with `rock-content-view-manager`.

@demo demo/index.html 
-->
<dom-module id="rock-content-view">
    <template>
        <style include="bedrock-style-common">
      .content-view-container {
        /*margin: 16px 18px 48px;*/
        box-sizing: border-box;
        /*box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);*/        
        height: 100%;
        /*border-radius: 3px;*/        
      }
      
      #content {
        height: 100%;
      }
      
    </style>
<div id="content-view-container" class="content-view-container">
    <div id="content">
    </div>
</div>
</template>
<script>
    (function () {
        'use strict';

        Polymer({
            is: 'rock-content-view',

            properties: {
                /**
                 * Indicates the title of the view.
                 * 
                           */
                viewTitle: {
                    type: String,
                    value: "View Title"
                },
                /**
                * Indicates the url of the title icon image of the view.
                * 
                 */
                icon: {
                    type: String,
                    value: "pebble-icons:Dashboard"
                },
                /**
                 * Indicates the name of the view.
                 * Make sure that it is unique since the content view manager finds the content view based on the name.
                 */
                name: {
                    type: String
                },

                /**
                * Indicates the callback function, which is invoked once the content is rendered.
                */
                renderedCallback: {
                    type: Function
                }
            },
            
            behaviors: [
                RUFBehaviors.UIBehavior
            ],
            /**
            * Can be used to render the component based on the given configuration. 
            * This method is used by `content-view-manager`.
            */
            render: function () {
                var contentElement = this.$.content;
                if (contentElement && this.component && this.component.path) {
                    this.component.path = this.component.path.replace("../../src/elements/", "../");
                    ComponentHelper.loadContent(contentElement, this.component, this, this.renderedCallback);
                }
            },
            /**
            * Can be used to invoke the event handler function when the `close` icon is clicked.
            * 
            */
            onCloseClick: function () {
                this.manager.closeView(this.name);
            },
            /**
            * Can be used to invoke the event handler function when the `minimize` icon is clicked.
            * 
            */
            onMinimizeClick: function () {
                this.manager.minimizeView(this.name);
            },
          /**
            * <b><i>Content development is under progress... </b></i> 
            */
            getContent:function () {
                if (this.$.content && this.$.content.firstChild) {
                    return this.$.content.firstChild;
                } else {
                    return null;
                }
            }
        });
    })();
</script>
</dom-module>
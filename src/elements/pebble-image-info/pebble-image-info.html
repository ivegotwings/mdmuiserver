<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">


<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-component-context-behavior/bedrock-component-context-behavior.html">

<link rel="import" href="../pebble-spinner/pebble-spinner.html">


<!--
    @group rock Elements
    @element pebble-image-info
-->

<dom-module id="pebble-image-info">
    <template>
        <style>
            pebble-spinner {
                background: var(--palette-white, #ffffff);
                margin: 5px 20px 30px;
                box-sizing: border-box;
            }
            .main-container{
                max-height: 230px;
                overflow: hidden;
            }
            .image-description{
                font-size: 12px !important;
                color: var(--dark-title-color, #1a2028);
                margin-bottom: 10px;
            }

        </style>

        <div class="main-container">
            <div class="image-description">[[description]]</div>
            <div class="image-wrapper">
                <img src$="[[imageUrl]]">
            </div>
        </div>

    </template>

    <script>
        class PebbleImageInfo extends Polymer.Element{
            static get is() {
                return "pebble-iframe";
            }
            static get properties() {
                return {
                    description: {
                        type: String
                    },
                    imageUrl: {
                        type: String
                    }
                }
            }
            disconnectedCallback() {
                super.disconnectedCallback();
            }
            connectedCallback() {
                super.connectedCallback();
                Polymer.Async.timeOut.after(this.timeout).run(() => {
                    if (!this.isLoaded) {
                        this.dispatchEvent(new Event("iframe-load-failed"));
                    }
                });
            }
        }
        customElements.define(PebbleImageInfo.is, PebbleImageInfo);

    </script>
</dom-module>

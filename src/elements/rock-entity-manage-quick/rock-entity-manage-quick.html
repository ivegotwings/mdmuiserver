<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-pubsub/bedrock-pubsub.html">

<link rel="import" href="../pebble-button/pebble-button.html">
<link rel="import" href="../pebble-dialog/pebble-dialog.html">
<link rel="import" href="../pebble-vertical-divider/pebble-vertical-divider.html">
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">

<link rel="import" href="../rock-tabs/rock-tabs.html">

<dom-module id="rock-entity-manage-quick">
    <template>
        <style include="pebble-styles-shared">
            
        </style>
        quick manage title here
        <rock-tabs id="rockTabs" config="{{_tabConfig}}">
        </rock-tabs>
        <iron-ajax auto url="../../data/EntityManageApp/quick-entity-manage-tab-config.json" handle-as="json" on-response="_handleResponse"></iron-ajax>
        <bedrock-pubsub event-name="component-creating" handler="_onComponentCreating"></bedrock-pubsub>
    </template>
    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'rock-entity-manage-quick',

                properties: {
                    context: {
                        type: Object,
                        value: function () {
                            return {
                                "list": "productMaster",
                                "source": "SAP",
                                "locale": "en-US",
                                "entityId": "nart1"
                            };
                        }
                    },
                    /*
                    * Indicates the config for tab element
                    */
                    _tabConfig: {
                        type: Object,
                        value: function () {
                            return {};
                        }
                    }
                },
                behaviors: [
                    RUFBehaviors.UIBehavior
                ],
                _handleResponse: function (e) {
                    this.set("_tabConfig", e.currentTarget.lastResponse);
                },
                _onComponentCreating: function (e, detail, sender) {
                    var component = detail.data;

                    if (component.name.indexOf("attribute") != -1 && component.properties) {
                        component.properties.list = this.context.list;
                        component.properties.source = this.context.source;
                        component.properties.locale = this.context.locale;
                        component.properties['entity-id'] = this.context.entityId;
                    }
                }
            });
        })();
    </script>
</dom-module>
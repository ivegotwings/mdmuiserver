<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../../bower_components/polymer/lib/elements/custom-style.html">
<link rel="import" href="../../../bower_components/polymer/lib/utils/async.html">
<link rel="import" href="../../../bower_components/polymer/lib/utils/debounce.html">

<dom-module id="data-table-column-filter">
    <template>
    <custom-style>
    <style>
      :host([hidden]) {
        display: none;
      }

    paper-input {
      --paper-input-container: {
        margin-bottom: 20px;
      };
      --paper-input-container-label: {
        font-size: inherit;
      };
      --paper-input-container-underline-focus: {
        border-bottom: 1px solid var(--focused-line, #026bc3);
      };
      --paper-input-container-label-focus: {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);
        color:var(--input-label-color,#96b0c6);
      };
      --paper-input-container-label: {
        color: var(--palette-cerulean, #036bc3);
        font-weight: var(--font-bold, bold);
        top: -3px;
        font-size: var(--default-font-size, 14px);
      };
    }
  </style>
    </custom-style>
  
    <paper-input label="[[label]]" value="[[value]]" on-value-changed="_valueChanged"></paper-input>
  </template>
  <script>
    Polymer({
      is: 'data-table-column-filter',

      properties: {
        label: {
          type:String,
        },
        value: {
          type: String,
          notify: true
        },
        hidden: {
          type: Boolean
        }
      },

      _valueChanged: function(e) {
        // store value in a variable, referring to e.detail.value inside the debounce
        // function results in weird outcomes. event object might be reused by Polymer?
        var value = e.detail.value;
        this._debouncer = Polymer.Debouncer.debounce(this._debouncer, Polymer.Async.timeOut.after(250), () => {
          this.value = value;
        });
      }
    });
  </script>
</dom-module>

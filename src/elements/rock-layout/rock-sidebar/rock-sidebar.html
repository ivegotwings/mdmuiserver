<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../../bedrock-style-manager/styles/bedrock-style-common.html">
<link rel="import" href="../../bedrock-style-manager/styles/bedrock-style-gridsystem.html">
<link rel="import" href="../../bedrock-ui-behavior/bedrock-ui-behavior.html">

<link rel="import" href="../../pebble-icons/pebble-icons.html">
<link rel="import" href="../../pebble-icon/pebble-icon.html">

<!--
`<rock-sidebar>` Represents a sidebar layout structure inside rock-layout. 
This element is a child of `<rock-layout>` element.

For example:

    <rock-layout>
        <rock-header>
            sidebar content . . .
        </rock-header>
        main layout content . . .
    </rock-layout>

It can contian any elements or components.

@demo ../demo/index.html
-->

<dom-module id="rock-sidebar">
    <template>
        <style include="bedrock-style-common bedrock-style-gridsystem"></style>
        <style>
            :host {
                display: -webkit-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;
                height: auto; 
                z-index: 0;
                position:relative;
                width: 30% !important;
                -webkit-transition: width .5s linear;
                transition: width .5s linear;  
                --accordion-header-text:{
                    white-space: nowrap;
                }     
            }
            
            #rockSidebarContainer {
                height: 100%;
                width: 100%;
                border-left: thin solid #D8DDE4;
                font-size: var(--default-font-size, 14px);
            }
            
            @media only screen and (max-width: 768px) {
                :host {
                    width: 100%;
                }
            }
            .toggle-area-outside{
                background: transparent;
                height: 100%;
                position: absolute;
                z-index: 1;
                width: 1px;
                left:0px;
                display: flex;
                align-items: center;
            }
            .toggle-area{
                position: absolute;
                left: 0px;
                width:20px;
                height: 42px;
                display: -ms-flexbox;
                display: -webkit-box;
                display: -webkit-flex;
                left:-19px;
            }
            .icon-wrapper{
                background: var(--palette-pale-grey,#e6ebf0);
                border-top-right-radius: 100px;
                border-bottom-right-radius: 100px;
                line-height: 42px;
                width: 100%;
                cursor: pointer;
                min-width: 20px;
            }
            
            :host(.collapse) .toggle-area .leftIcon{
                border-top-right-radius: 0px;
                border-bottom-right-radius: 0px;
                border-top-left-radius: 100px;
                border-bottom-left-radius: 100px;
                opacity:1;
                -webkit-transition: opacity .5s linear; 
                transition: opacity .5s linear;
            }
            .leftIcon{
                opacity: 0; 
            }
            :host(.collapse){
                width:0% !important;
                -webkit-transition: width .5s linear;
                transition: width .5s linear;
            }
           
        </style>        
        <div id="rockSidebarContainer">  
            <template is="dom-if" if="[[collapsable]]">
                <div class="toggle-area-outside">
                    <div class="toggle-area">
                        <div class="icon-wrapper leftIcon" on-tap="_moveLeft">
                            <pebble-icon icon="pebble-icon:LeftArrow" class="pebble-icon-size-12"></pebble-icon>
                        </div>
                        <div class="icon-wrapper rightIcon" on-tap="_moveright">
                            <pebble-icon icon="pebble-icon:RightArrow" class="pebble-icon-size-12"></pebble-icon>
                        </div>
                    </div>
                </div>
            </template>          
            <slot></slot>
        </div>
    </template>
    <script>
        Polymer({
            is: 'rock-sidebar',
            properties: {
                /*
                * Indicates position of sidebar in rock-layout like, `left` or `right` 
                */
                position:{
                    type: String
                },
                
                /*
                * Indicates width of sidebar on layout screen.
                * It can be `half` or `quarter`.
                */
                width: {
                    type: String,
                    value: "quarter"
                },
                collapse:{
                    type:Boolean,
                    value:false
                },
                collapsable:{
                    type:Boolean,
                    value:false
                }
            },
            behaviors: [
                RUFBehaviors.UIBehavior
            ],
            attached: function() {
                var parentContainer = Polymer.dom(this).parentNode.$.container;
                
                if(this.position == "left")
                {
                    parentContainer.style.flexDirection = 'row-reverse';
                    this.$.rockSidebarContainer.style.borderRight = 'thin solid #D8DDE4';
                    this.$.rockSidebarContainer.style.borderLeft = 'none';
                }
                
                if(this.width){
                    if(this.width.toLowerCase() == 'half') {
                        this.style.width = "100%";
                    } else if (this.width.toLowerCase() == "quarter") {
                        this.style.width = "30%";
                    }
                }
                if(this.collapsable && this.collapse ){
                    this.classList.add('collapse');
                }
            },
            _moveright:function(e){
                this.classList.add('collapse');
                ComponentHelper.fireBedrockEvent("toggle-sidebar", e.detail, { ignoreId: true });
            },
            _moveLeft:function(e){
                this.classList.remove('collapse');
                ComponentHelper.fireBedrockEvent("toggle-sidebar", e.detail, { ignoreId: true });
            }
        });
    </script>
</dom-module>
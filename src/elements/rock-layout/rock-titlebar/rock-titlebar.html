<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../pebble-button/pebble-button.html">

<!--
`<rock-titlebar>` Represents a titlebar layout structure inside rock-layout. 
This element is a child of `<rock-layout>` element.

It can contian any elements or components.

For example:

        <rock-layout>
            <rock-titlebar icon="" sub-title="" title="" closable minimizable>
                title content . . .
            </rock-titlebar>
        </rock-layout>

@demo ../demo/index.html
-->
<dom-module id="rock-titlebar">
    <template>
        <style include="pebble-styles-shared"></style>
        <style>
            :host {
                display: flex;
                height: auto;
            }
            
            .header {
                border-radius: 1px;
                color: black;
                position: inherit;
                border-top-left-radius: inherit;
                border-top-right-radius: inherit;
                overflow: hidden;
                /* @apply(--paper-card-header); */
                @apply(--layout-horizontal);
                width: 100%;
                height: 39px;
                padding-left: 5px;
                border-bottom: 1px solid var(--cloudy-blue-color);
            }
            
            .header iron-icon {
                width: 16px;
                height: 16px;
                @apply(--layout-start);
            }
            
            #title {
                margin-left: 5px;
                margin-right: 5px;
                display: flex;
                flex-direction: column;
                width: 100%;
            }
            
            #subTitle {
                font-size: 12px;
                opacity: 0.7;
                font-weight: normal;
                font-style: normal;
                font-stretch: normal;
                color: var(--color-steal-grey);
            }
            
            #mainTitle {
                height: 16px;
                font-size: 14px;
                font-weight: normal;
                font-style: normal;
                font-stretch: normal;
                font-family: var(--default-font-family);
                color: var(--dark-title-color);
                line-height: 22px;
            }

            .titleMargin {
                margin-top: 9px;
            }
            
            .header .title-text {
                display: flex;
                flex-direction: row;
                @apply(--layout-flex);
            }
            
            pebble-icon::shadow iron-icon {
                margin-top: 8px;
            }
            
            pebble-button::shadow paper-button {
                min-width: 0px;
            }
            
            #maximize::shadow paper-button,
            #minimize::shadow paper-button {
                padding: 9px 2px 12px 2px;
            }
            .minimize{
                vertical-align: super;
            }
        </style>
        <div id="rockTitle" class="header">
            <div hidden$="{{!title}}" class="title-text">
                <pebble-icon icon="[[icon]]"></pebble-icon>
                <div id="title">
                    <template is="dom-if" if="{{_isSubTitleDefined()}}">
                        <div id="subTitle">{{subTitle}}</div>
                        <div id="mainTitle">{{title}}</div>
                    </template>
                    <template is="dom-if" if="{{!_isSubTitleDefined()}}">
                        <div id="mainTitle" class="titleMargin">{{title}}</div>
                    </template>
                </div>
                <content>
                </content>
            </div>
            <div>
                <template is="dom-if" if="[[minimizable]]">
                <pebble-button id="minimize" class="minimize" name="minimize" icon="pebble-icons:Line-Copy-3" title="Minimize" on-tap="_onMinimize">
                    </pebble-button>
                </template>
                <template is="dom-if" if="[[closable]]">
                    <pebble-button id="close" name="close" icon="pebble-icons:Elements" title="Close" on-tap="_onClose">
                        </pebble-button>
                </template>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'rock-titlebar',
            properties: {
                /*
                * Indicates icon if value is set
                */
                icon: {
                    type: String,
                    reflectToAttribute: true
                },
                /*
                * Indicates title if value is set
                */
                title: {
                    type: String,
                    reflectToAttribute: true,
                    notify: true
                },
                /*
                * Indicates sub title if value is set
                */
                subTitle: {
                    type: String,
                    reflectToAttribute: true,
                    notify: true
                },
                /*
                * Indicates close icon should come or not to close window
                */
                closable: {
                    type: Boolean,
                    reflectToAttribute: true
                },
                /*
                * Indicates minimize icon should come or not to minimize window
                */
                minimizable: {
                    type: Boolean,
                    reflectToAttribute: true
                }
            },
            _onMinimize: function() {
                var contentView = document.querySelector("main-app").$$("rock-content-view-manager").$$("rock-content-view:not([hidden])");                
                contentView.onMinimizeClick(contentView.name);
            },
            _onClose: function() {
                var contentView = document.querySelector("main-app").$$("rock-content-view-manager").$$("rock-content-view:not([hidden])");                
                contentView.onCloseClick(contentView.name);
            },
            _isSubTitleDefined: function(){
                if(this.attributes["sub-title"] == undefined) {
                    return false;
                }
                return true;
            }
      
        });
    </script>
</dom-module>
<link rel="import" href="../../../bower_components/iron-data-table/iron-data-table.html">
<link rel="import" href="../../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../../bower_components/paper-checkbox/paper-checkbox.html">


<!--
`pebble-grid`
Grid control for riversand ui framework

@demo demo/index.html 
-->

<dom-module id="pebble-grid">
	<template>
		<style include="shared-styles">
			#viewMode {
				float: right;
				padding: 0 20px 0 0;
				width: 110px;
			}
			
			h1 {
				text-align: center;
			}
			
			div.clearboth {
				clear: both;
			}
		</style>
		<style is="custom-style">
			iron-data-table {
				border: 1px solid #C3CCD6;
				height: var(pebble-grid-height, 255px);
				--iron-data-table-row: {
					align-items: center;
				}
				--iron-data-table-header: {
					background-color: #139DE6;
					height: 45px;
					color: white;
				}
				--iron-data-table-row-odd: {
					background-color: #FFFFFF;
				}
				--iron-data-table-row-even: {
					background-color: #F9FBFD;
				}
			}
			
			.input-content.paper-input-container .paper-input-label {
				color: white !important;
			}
		</style>
		<paper-dropdown-menu id="viewMode" label="View Mode" vertical-align="top" horizontal-align="left">
			<paper-listbox class="dropdown-content" attr-for-selected="selecteditem" selected="{{data.config.viewMode}}">
				<paper-item selecteditem="tabular">Tabular</paper-item>
				<paper-item selecteditem="tile">Tile</paper-item>
				<paper-item selecteditem="list">List</paper-item>
			</paper-listbox>
		</paper-dropdown-menu>
		<div class="clearboth"></div>
		<template is="dom-if" if="{{_isTabularMode(data.config.viewMode)}}">
			<iron-data-table page-size="10" selection-enabled multi-selection$="{{data.config.isMultiSelect}}" items="{{data.dataItems}}">
				<template is="dom-repeat" items="[[data.tabular.columns]]" as="col" index-as="colIndex">
					<template is="dom-if" if="[[_isCheckBox(col)]]">
						<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
							<template>
								<paper-checkbox checked$="{{_columnValue(item, column.columnIndex)}}"></paper-checkbox>
							</template>
						</data-table-column>
					</template>
					<template is="dom-if" if="[[_isTextArea(col)]]">
						<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
							<template>
								<paper-textarea value="{{_columnValue(item, column.columnIndex)}}"></paper-textarea>
							</template>
						</data-table-column>
					</template>
					<template is="dom-if" if="[[_isRadioButton(col)]]">
						<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
							<template>
								<paper-radio-button checked$="{{_columnValue(item, column.columnIndex)}}"></paper-radio-button>
							</template>
						</data-table-column>
					</template>
					<template is="dom-if" if="[[_isTextBox(col)]]">
						<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
							<template>
								<paper-input value="{{_columnValue(item, column.columnIndex)}}"></paper-input>
							</template>
						</data-table-column>
					</template>
					<template is="dom-if" if="[[_isNotEditable(col)]]">
						<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
							<template>{{_columnValue(item, column.columnIndex)}}</template>
						</data-table-column>
					</template>
				</template>
			</iron-data-table>
		</template>
		<template is="dom-if" if="{{_isTileMode(data.config.viewMode)}}">
			<h1>Under Design</h1>
		</template>
		<template is="dom-if" if="{{_isListMode(data.config.viewMode)}}">
			<h1>Under Design</h1>
		</template>
	</template>
	<script> 
      (function() {
            'use strict';
            
            Polymer( {
                is: 'pebble-grid', 
                properties: {
                    data: {
                        type: Object
                    }
                },
				ready: function(){
					
				},
                _columnValue: function(gridData, index) {
                    var cellData = gridData[this.data.tabular.columns[index].name];
                    if(cellData != undefined) {
                       index++;
                    }
                    return cellData;
				},
				_isTabularMode: function(viewMode){
					return viewMode == 'tabular';
				},
				_isTileMode: function(viewMode){
					return viewMode == 'tile';
				},
				_isListMode: function(viewMode){
					return viewMode == 'list';
				},
				_isTextBox: function(col){
					return col.editType == 'text';
				},
				_isCheckBox: function(col){
					return col.editType == 'checkbox';
				}, 
				_isTextArea: function(col){
					return col.editType == 'textarea';
				},
				_isRadioButton: function(col){
					return col.editType == 'radio';
				},
				_isNotEditable: function(col){
					return col.editType == '';
				},
				_isFilterEnabled: function(col){
					return col.filterable ? col.name : undefined;
				},
				_isSortable: function(col){
					return col.sortable ? col.name : undefined;
				}

            });
        })();
    </script>
</dom-module>
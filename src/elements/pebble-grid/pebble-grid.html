<link rel="import" href="../../../bower_components/iron-data-table/iron-data-table.html">
<link rel="import" href="../../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../pebble-button/pebble-button.html">


<!--
`pebble-grid`
Grid control for riversand ui framework

@demo demo/index.html 
-->

<dom-module id="pebble-grid">
	<template>
		<style include="shared-styles">
			#viewMode {
				padding: 0 20px 0 0;
				width: 110px;
			}
			
			h1 {
				text-align: center;
				font-family: var(--default-font-family);
			}
			
			div.clearboth {
				clear: both;
			}
			

		</style>
		<style is="custom-style">
			iron-data-table {
				height: var(pebble-grid-height, 255px);
				--iron-data-table-row: {
					align-items: center;
					font-family:var(--default-font-family);
				}
				--iron-data-table-header: {
					background-color: #139DE6;
					height: 45px;
					color: white;
					font-family:var(--default-font-family);
				}
				--iron-data-table-row-odd: {
					background-color: #FFFFFF;
					font-family:var(--default-font-family);
				}
				--iron-data-table-row-even: {
					background-color: #F9FBFD;
					font-family:var(--default-font-family);
				}
			}
			
			#pebbleGridContainer {
				border: 1px solid #D0D7DE;
				font-family: var(--default-font-family);
				font-size: 15px;
			}

			#gridHeader {
				border-color: #D0D7DE;
				border-style: solid;
				border-width: 1px 1px 0px 1px;
				font-family: var(--default-font-family);
				font-size: 14px;
			}
			
			pebble-button.dropdownIcon {
				--pebble-button: {
					height: 30px;
					padding: 0.5em 0em 0.5em 0em;
					background-color:var(--default-icon-selected);
				}
				--pebble-button-iron-icon: {
					height: 24px;
					width: 24px;
					padding: 0 5px 0 0;
					
				}
				--pebble-button-paper-menu: {
					background: #ffffff;
					color: #000000;
				}
				--pebble-button-paper-menu-item: {
					background: #ffffff;
					color: #000000;
					font-size: 14px;
				}
			}
			
			.input-content.paper-input-container .paper-input-label {
				color: white !important;
				font-family: var(--default-font-family);
			}
			
		</style>
		<div id="gridHeader" align="right">
			<pebble-button items="Tabular,Tile,List" class="dropdownIcon" icon="view-list" menu-button button-text="{{data.config.viewMode}}"
				selected-value="{{data.config.viewMode}}" noink raised no-overlap vertical-offset="-200" horizontal-offset="10"></pebble-button>
		</div>
		<div id="pebbleGridContainer">
			<template is="dom-if" if="{{_isTabularMode(data.config.viewMode)}}">
				<iron-data-table page-size="10" selection-enabled multi-selection$="{{data.config.isMultiSelect}}" items="{{data.dataItems}}">
					<template is="dom-repeat" items="[[data.tabular.columns]]" as="col" index-as="colIndex">
						<template is="dom-if" if="[[_isCheckBox(col)]]">
							<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
								<template>
									<paper-checkbox checked$="{{_columnValue(item, column.columnIndex)}}"></paper-checkbox>
								</template>
							</data-table-column>
						</template>
						<template is="dom-if" if="[[_isTextArea(col)]]">
							<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
								<template>
									<paper-textarea value="{{_columnValue(item, column.columnIndex)}}"></paper-textarea>
								</template>
							</data-table-column>
						</template>
						<template is="dom-if" if="[[_isRadioButton(col)]]">
							<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
								<template>
									<paper-radio-button checked$="{{_columnValue(item, column.columnIndex)}}"></paper-radio-button>
								</template>
							</data-table-column>
						</template>
						<template is="dom-if" if="[[_isTextBox(col)]]">
							<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
								<template>
									<paper-input value="{{_columnValue(item, column.columnIndex)}}"></paper-input>
								</template>
							</data-table-column>
						</template>
						<template is="dom-if" if="[[_isNotEditable(col)]]">
							<data-table-column name="[[col.header]]" column-index="{{colIndex}}" filter-by$="[[_isFilterEnabled(col)]]" sort-by$="[[_isSortable(col)]]">
								<template>{{_columnValue(item, column.columnIndex)}}</template>
							</data-table-column>
						</template>
					</template>
				</iron-data-table>
			</template>
			<template is="dom-if" if="{{_isTileMode(data.config.viewMode)}}">
				<h1>Under Design</h1>
			</template>
			<template is="dom-if" if="{{_isListMode(data.config.viewMode)}}">
				<h1>Under Design</h1>
			</template>
		</div>
	</template>

	<script> 
      (function() {
            'use strict';
            
            Polymer( {
                is: 'pebble-grid', 
                properties: {
                    data: {
                        type: Object
                    }
                },
				ready: function(){
					
				},
                _columnValue: function(gridData, index) {
                    var cellData = gridData[this.data.tabular.columns[index].name];
                    if(cellData != undefined) {
                       index++;
                    }
                    return cellData;
				},
				_isTabularMode: function(viewMode){
					return viewMode == 'Tabular';
				},
				_isTileMode: function(viewMode){
					return viewMode == 'Tile';
				},
				_isListMode: function(viewMode){
					return viewMode == 'List';
				},
				_isTextBox: function(col){
					return col.editType == 'text';
				},
				_isCheckBox: function(col){
					return col.editType == 'checkbox';
				}, 
				_isTextArea: function(col){
					return col.editType == 'textarea';
				},
				_isRadioButton: function(col){
					return col.editType == 'radio';
				},
				_isNotEditable: function(col){
					return col.editType == '';
				},
				_isFilterEnabled: function(col){
					return col.filterable ? col.name : undefined;
				},
				_isSortable: function(col){
					return col.sortable ? col.name : undefined;
				}

            });
        })();
    </script>
</dom-module>
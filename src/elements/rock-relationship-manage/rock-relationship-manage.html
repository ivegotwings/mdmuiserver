<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../pebble-horizontal-divider/pebble-horizontal-divider.html">
<link rel="import" href="../../../bower_components/iron-demo-helpers/demo-pages-shared-styles.html">
<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../rock-relationship-grid/rock-relationship-grid.html">
<link rel="import" href="../liquid-entity-get/liquid-entity-get.html">
<link rel="import" href="../liquid-entity-getdata/liquid-entity-getdata.html">
<link rel="import" href="../bedrock-pubsub/bedrock-pubsub.html">
<!--
`rock-relationship-manage` Represents relationship component in the framework.
It renders the list of attributes based on the specified relationship type.

@group rock Elements
@element rock-relationship-manage
@demo demo/index.html
-->

<dom-module id="rock-relationship-manage">
    <template>


<!--<iron-ajax auto url="../../data/EntityManageApp/relationshipGridConfig.json" handle-as="json" last-response="{{gridConfig}}"></iron-ajax>
<liquid-entity-get name="attributeModelGetService" request="{{attributeModelRequest}}" response="{{attributeModelResponse}}"></liquid-entity-get>
<liquid-entity-getdata id="initiateSearchResult" log-internal-detail operation="initiatesearch" request="{{request}}" response="{{searchResponse}}"></liquid-entity-getdata>
<liquid-entity-getdata id="searchResultGetDataService" log-internal-detail operation="getsearchresultdetail" request="{{request}}"
    request-id="[[searchResponse.data.requestId]]" response="{{searchResultResponse}}"></liquid-entity-getdata>

<pebble-grid id="entityGrid" config="{{gridConfig}}" attribute-models="{{attributeModelResponse.returnValue.attributeModels}}"
    page-size="100" data="{{searchResultResponse.data.entities}}"></pebble-grid>-->

    <iron-ajax auto url="demo/entity.json" handle-as="json" last-response="{{entityData}}"></iron-ajax>
    <rock-relationship-grid id="entityRelationshipGrid" relationship-type="[[context.relationshipTypeName]]" page-size="100" data="{{entityData}}"></rock-relationship-grid>
    <bedrock-pubsub event-name="grid-selecting-item" handler="onSelectingGridItem" target-id="entityRelationshipGrid"></bedrock-pubsub>

</template>
<script>
    Polymer({
        is: "rock-relationship-manage",

        properties: {
            context: {
                type: Object,
                value: function () {
                    return {};
                }
            },
            attributeModelRequest: {
                type: Object,
                value: function () {
                    return { action: "getAttributeModels" };
                }
            },
            request: {
                type: Object,
                value: function () {
                    return {
                        "data": {
                            "query": {
                                "ctx": [
                                    {
                                        "list": "fall2016",
                                        "classification": "shoes"
                                    },
                                    {
                                        "list": "master",
                                        "classification": "shirts"
                                    }
                                ],
                                "valCtx": [
                                    {
                                        "source": "cnet",
                                        "locale": "en-US"
                                    },
                                    {
                                        "source": "indix",
                                        "locale": "en-US"
                                    }
                                ],
                                "filters": {
                                    "attributesCriterion": [],
                                    "relationshipsCriterion": [],
                                    "typesCriterion": ["sku", "style"]
                                }
                            },
                            "fields": {
                                "ctxTypes": [
                                    "properties"
                                ],
                                "attributes": [
                                    "launchDate",
                                    "msrp"
                                ],
                                "relationships": ["ALL"]
                            },
                            "options": {
                                "totalRecords": 100,
                                "includeRequest": false
                            }
                        }
                    };
                }
            },
            /**
             * Indicates the response object that is received from liquid element.
             */
            searchResponse: {
                type: Object,
                value: undefined,
                notify: true
            }
        }
    });
</script>
</dom-module>
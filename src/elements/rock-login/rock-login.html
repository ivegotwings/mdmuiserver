<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../pebble-checkbox/pebble-checkbox.html">
<link rel="import" href="../pebble-button/pebble-button.html" />
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">
<link rel="import" href="../pebble-styles-app/pebble-styles-app.html">
<link rel="import" href="../pebble-main-logo/pebble-main-logo.html">

<dom-module id="rock-login">
<style is="custom-style" include="pebble-styles-shared">
            
            pebble-button::shadow paper-button{
                background-color:var(--button-bg-color);
                color:var(--button-text-color);
                width: 86px;
                height: 30px;
                border-radius: 3px;
                float: right;
                @apply(--pebble-login-button);
            }

            .forgot-div {
                text-align: right;
                font-size: var(--font-size-sm, 12px);
                color: #026bc3;
                cursor: pointer;
            }
            .logoimg{
                width:200px;
                height:60px;
            }
            .checkbox-wrapper {
                display: inline-block;
                vertical-align: middle;
                font-size: var(--font-size-sm, 12px);
                color:var(--color-steal-grey);
            }
            .checkbox-wrapper pebble-checkbox::shadow #checkboxLabel{
                color: #75808b;
            }
           pebble-checkbox::shadow #checkboxContainer .login-Text{
               padding-left:0px !important;
           }        
</style>
<style is="custom-style" include="pebble-styles-app"></style>
<template>
    <div class="login">
        <div class="mask">
            <div class="loginlogo">
                <img src="/src/images/loginlogo.svg" class="logoimg" on-logo-click="onLogoClick">
            </div>
            <div class="login-Content">
                <div class="login-Div">
                    <input id="username" type="text" placeholder="Username" value="{{_userName::input}}" />
                </div>
                <div class="login-Div">
                    <input id="password" type="password" placeholder="Password" value="{{_password::input}}" on-keyup="_loginOnEnter"/>
                </div>
                <div class="forgot-div">
                    <span on-tap="_onForgotTap">Forgot Password</span>
                </div>
                <div class="divAlign">
                    <div class="checkbox-wrapper">
                      <pebble-checkbox  noink checked="{{_isStaySignedIn::change}}">Stay Signed In</pebble-checkbox>
                    </div>                    
                    <pebble-button id="loginButton" button-text="Login" raised on-tap="_onTapLogin"></pebble-button>
                </div>
            </div>
            <div class="footerbg">
            </div>
            <div class="copyright">Powered by Riversand Data Platform Copyright @ Riversand 2017</div>
        </div>
    </div>
</template>
<script>
        Polymer({
            is: "rock-login",
            properties: {
                /**
                 * Indicates user name
                 */
                _userName: {
                    type: String,
                    value: null
                },

                /**
                 * Indicates password
                 */
                _password: {
                    type: String,
                    value: null
                },

                /**
                 * Indicates to store the credentials in cookies
                 */
                _isStaySignedIn: {
                    type: Boolean,
                    value: false
                },

                /**
                 * Indicates is the user authenticated or not
                 */
                isAuthenticated: {
                    type: Boolean,
                    value: false,
                    notify: true
                },

                /**
                 * Indicates the user authentication response
                 */
                authResponse: {
                    type: Object,
                    value: function(){ return {}; },
                    notify: true
                }                
            },

            _onTapLogin: function () {
                this.isAuthenticated = this._isValid();   

                if(this.isAuthenticated)
                {
                    this.authResponse = {
                                            "isSuccessful": true,    
                                            "userDetails": {
                                                                "userName" : this._userName,                                
                                                                "isStaySignedIn" : this._isStaySignedIn,
                                                                "isAuthenticated" : this.isAuthenticated                                                               
                                                            }
                                        };
                }
                else
                {
                    this.authResponse = {
                                            "isSuccessful": false,    
                                            "errorDetails": {                                                                
                                                                "message" : "Please provide valid credentials."                                                               
                                                            }
                                        };
                }                
            },

            _isValid: function () {
                if (this._userName == 'admin' && this._password == 'admin') {
                    return true;
                }

                return false;
            },

            _onForgotTap: function(){
                // Add logic here for forgot link clicked
            },

            _loginOnEnter: function (e) {
                if (e.keyCode === 13) {
                    this._onTapLogin();
                }
            }

        });
    </script>
</dom-module>
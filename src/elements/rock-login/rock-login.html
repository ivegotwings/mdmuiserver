<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../pebble-button/pebble-button.html" />
<link rel="import" href="../pebble-checkbox/pebble-checkbox.html">
<link rel="import" href="../pebble-main-logo/pebble-main-logo.html">
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">
<link rel="import" href="../pebble-styles-app/pebble-styles-app.html">
<link rel="import" href="../pebble-textbox/pebble-textbox.html">

<!--
`<rock-login>` Represents an element to authenticate user.

### Example

    <rock-login is-authenticated="{{isAuth}}" auth-response="{{authResponse}}"></rock-login>


@group rock Elements
@element rock-login
@demo demo/index.html
-->

<dom-module id="rock-login">
<style is="custom-style" include="pebble-styles-shared">
            
            pebble-button::shadow paper-button{
                background-color:var(--button-bg-color);
                color:var(--button-text-color);
                width: 86px;
                height: 30px;
                border-radius: 3px;
                float: right;
                @apply(--pebble-login-button);
            }
             .login {
                width: 100%;
                margin: 0;
                background-color: var(--login-page-bg);
                top: 0;
                left: 0;
                bottom: 0;
                position: absolute;
            }
            
            .mask {
                width: 649px;
                height: 540px;
                display: block;
                position: relative;
                margin: 2% auto;
                border-radius: 3px;
                background-color: var(--login-wrapper-bg);
                box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.34);
            }
            
            .loginlogo {
                padding-top: 50px;
                position: relative;
                text-align: center;
            }
            
            .login-Content {
                margin: 50px auto;
                width: 350px;
            }
            
            .login-Div {
                padding-bottom: 12px;
            }
            
            #staySignedIn {
                color: var(--color-steal-grey);
            }
            
            .login-Checkbox {
                width: 15px;
                height: 15px;
                border-radius: 3px;
                background-color: var(--palette-white);
                border: solid 1px var(--textbox-border);
            }
            
            .login-Text {
                width: 76px;
                height: 15px;
                font-size: var(--font-size-sm, 12px);
                font-weight: normal;
                font-style: normal;
                font-stretch: normal;
                line-height: 22px;
                vertical-align: text-top;
                color: var(--color-steal-grey);
            }
            
            .footerbg {
                background-image: url('../../images/illustration.png');
                background-repeat: no-repeat;
                width: 649px;
                height: 82px;
                position: absolute;
                bottom: 0;
                right: 0;
                left: 0;
            }
            
            .copyright {
                width: 195px;
                height: 28px;
                font-family: var(--default-font-family);
                font-size: var(--font-size-sm);
                font-weight: normal;
                font-style: normal;
                font-stretch: normal;
                line-height: 1.4;
                text-align: center;
                color: var(--palette-white);
                position: fixed;
                top: 90%;
                left: 45%;
            }

            .forgot-div {
                text-align: right;
                font-size: var(--font-size-sm, 12px);
                color: #026bc3;
                cursor: pointer;
            }
            .logoimg{
                width:200px;
                height:60px;
            }
            .checkbox-wrapper {
                display: inline-block;
                vertical-align: middle;
                font-size: var(--font-size-sm, 12px);
                color:var(--color-steal-grey);
            }
            .checkbox-wrapper pebble-checkbox::shadow #checkboxLabel{
                color: #75808b;
            }
           pebble-checkbox::shadow #checkboxContainer .login-Text{
               padding-left:0px !important;
           }   
           pebble-textbox::shadow #textbox{
               border: 1px solid var(--textbox-border);
                color: var(--color-steal-grey);
                width: 350px;
                height:50px;
                border-radius: 3px;
                transition: 500ms all ease;
                -webkit-transition: 500ms all ease;
                padding: 3px 3px 3px 10px;
                
           }
          pebble-textbox::shadow #textbox::shadow paper-input-container{
              margin-top:-18px !important;
              vertical-align: middle;
          }
          
          pebble-textbox::shadow #textbox::shadow label{
              font-size:var(default-font-size,14px) !important;
          }
          pebble-textbox::shadow #textbox::shadow paper-input-container::shadow .unfocused-line{
              border-bottom:0px !important;
          }
           pebble-textbox::shadow #textbox::shadow #input{
              font-size:var(--font-size-md, 16px) !important;
          }
          pebble-textbox::shadow #textbox::shadow paper-input-container::shadow .floated-label-placeholder{
              line-height: 26px !important;
          }
</style>
<style is="custom-style" include="pebble-styles-app"></style>
<template>
    <div class="login">
        <div class="mask">
            <div class="loginlogo">
                <img src="/src/images/loginlogo.svg" class="logoimg" on-logo-click="onLogoClick">
            </div>
            <div class="login-Content">
                <div class="login-Div">
                    <pebble-textbox value="{{_userName}}"  label="UserName"></pebble-textbox>
                </div>
                <div class="login-Div">
                    <pebble-textbox  type="password"  value="{{_password}}" on-keyup="_loginOnEnter" label="Password"></pebble-textbox>
                </div>
                <div class="forgot-div">
                    <span on-tap="_onForgotTap">Forgot Password</span>
                </div>
                <div class="divAlign">
                    <div class="checkbox-wrapper">
                      <pebble-checkbox noink checked="{{_isStaySignedIn}}">
                          Stay Signed In
                       </pebble-checkbox>
                    </div> 
                                       
                    <pebble-button id="loginButton" button-text="Login" raised on-tap="_onTapLogin"></pebble-button>
                </div>
            </div>
            <div class="footerbg">
            </div>
            <div class="copyright">Powered by Riversand Data Platform Copyright @ Riversand 2017</div>
        </div>
    </div>
</template>
<script>
        Polymer({
            is: "rock-login",
            properties: {
                /**
                 * Indicates user name
                 */
                _userName: {
                    type: String,
                    value: null
                },

                /**
                 * Indicates password
                 */
                _password: {
                    type: String,
                    value: null
                },

                /*
                 * Indicates tenant id
                 */
                _tenantId: {
                    type: String,
                    value: ''
                },

                /**
                 * Indicates to store the credentials in cookies
                 */
                _isStaySignedIn: {
                    type: Boolean,
                    value: false
                },

                /**
                 * Specifies whether or not a user is authenticated.
                 */
                isAuthenticated: {
                    type: Boolean,
                    value: false,
                    notify: true
                },

                /**
                 * Indicates the user authentication response.
                 */
                authResponse: {
                    type: Object,
                    value: function(){ return {}; },
                    notify: true
                }                
            },

            _onTapLogin: function () {
                this.isAuthenticated = this._isValid();   

                if(this.isAuthenticated)
                {
                    this.authResponse = {
                                            "isSuccessful": true,    
                                            "userDetails": {
                                                                "userName" : this._userName,                                
                                                                "isStaySignedIn" : this._isStaySignedIn,
                                                                "isAuthenticated" : this.isAuthenticated,
                                                                "tenantId": this._tenantId,                                                        
                                                            }
                                        };
                }
                else
                {
                    this.authResponse = {
                                            "isSuccessful": false,    
                                            "errorDetails": {                                                                
                                                                "message" : "Please provide valid credentials."                                                               
                                                            }
                                        };
                }
            },

            _isValid: function () {
                if (this._userName == 'admin' && this._password == 'admin') {
                    this._tenantId = "t1";
                    return true;
                }
                else if (this._userName == 'jcp' && this._password == 'jcp') {
                    this._tenantId = "jcp";
                    return true;
                }
                else if (this._userName == 'bsdf' && this._password == 'bsdf') {
                    this._tenantId = "bsdf";
                    return true;
                }
                else if (this._userName == 'ns' && this._password == 'ns') {
                    this._tenantId = "ns";
                    return true;
                }

                return false;
            },

            _onForgotTap: function(){
                // Add logic here for forgot link clicked
            },

            _loginOnEnter: function (e) {
                if (e.keyCode === 13) {
                    this._onTapLogin();
                }
            }

        });
    </script>
</dom-module>
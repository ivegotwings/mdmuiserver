<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/polymer/lib/mixins/mutable-data.html">
<link rel="import" href="../rock-component-config-behavior/rock-component-config-behavior.html">

<!--
@group rock Elements
@element rock-self-help
-->
<dom-module id="rock-self-help">
    <template></template>
    <script>
        class RockSelfHelp
            extends Polymer.mixinBehaviors([RUFBehaviors.ComponentConfigBehavior], Polymer.OptionalMutableData(Polymer.Element)) {
            static get is() { return 'rock-self-help' }
            ready() {
                super.ready();
            }

            connectedCallback() {
                super.connectedCallback();
                this.requestConfig("help-settings");
            }

            disconnectedCallback() {
                super.disconnectedCallback();
            }

            onConfigLoaded({config}) {
                //append url to head
                let element = document.createRange().createContextualFragment(config[config.mode + 'url']);
                document.head.appendChild(element);
                //provide role to window var
                //check for multiple role support
                window.app_role = RUFUtilities.mainApp.roles[0];
            }            
        }
        customElements.define(RockSelfHelp.is, RockSelfHelp);
    </script>
</dom-module>
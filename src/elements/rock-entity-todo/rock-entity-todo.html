<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../pebble-image-viewer/pebble-image-viewer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../pebble-icon/pebble-icon.html">
<link rel="import" href="../pebble-icons/pebble-icons.html">
<link rel="import" href="rock-entity-item.html">
<link rel="import" href="../../../bower_components/iron-ajax/iron-ajax.html">

<!--
`<rock-entity-todo>` Represents an element that displays entity to-do as a list.

Example:

    <template is="dom-bind">
        <iron-ajax url="entities.json" last-response="{{response}}" auto></iron-ajax>
		<rock-entity-todo entities="{{response}}"></rock-entity-todo>                
	</template>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--entity-todo-icon-outer` | Mixin applied to icon outer circle | {}
`--entity-todo-container` | Mixin applied to entity item container | {}
`--entity-todo-content` | Mixin applied to entity item content | {}
`--entity-todo-icon-width` | The width of icon | ``
`--entity-todo-icon-height` | The height of icon | ``
`--entity-todo-icon-margin` | The margin of icon | ``
`--entity-todo-icon-fill-color` | The fill color of icon | ``
`--entity-todo-icon-stroke-color` | The stroke color of icon | ``

@group rock Elements
@element rock-entity-todo
@demo demo/index.html
-->

<dom-module id="rock-entity-todo">    
    <template>
        <style is="custom-style" include="iron-flex iron-flex-alignment">            

            #entity-todo {
                --entity-icon-outer-circle: {                    
                    @apply(--entity-todo-icon-outer);
                }

                --entity-icon-width: var(--entity-todo-icon-width);
                --entity-icon-height: var(--entity-todo-icon-height);
                --entity-icon-margin: var(--entity-todo-icon-margin);
                --entity-icon-fill-color: var(--entity-todo-icon-fill-color);
                --entity-icon-stroke-color: var(--entity-todo-icon-stroke-color);

                --entity-container: {
                    @apply(--entity-todo-container);
                }

                --entity-content: {
                    @apply(--entity-todo-content);
                };                             
            }
           
        </style>

        <template is="dom-repeat" items="[[entities.todos]]">                
            <rock-entity-item id="entity-todo" 
                              icon-fill-color="[[item.icon.fillcolor]]" 
                              icon-stroke-color="[[item.icon.strokecolor]]"
                              icon-outer-color="[[item.icon.outerbgcolor]]"
                              icon-margin="[[item.icon.margin]]"
                              icon="[[item.icon.name]]" 
                              message="[[item.message]]"
                              data="[[item.data]]">
            </rock-entity-item>
        </template>
        <iron-ajax id="todo-ajax" auto url="[[url]]" handle-as="json" last-response="{{entities}}"></iron-ajax>        
    </template>      

<script>
    Polymer({
        is: 'rock-entity-todo',

        properties: {

            /**
             *  Indicates the list of entities in JSON format
            */
            entities: {
                type: Object,
                notify: true,
                value: {}
            },

            /**
             * Indicates url to fetch ajax request
             */
            url: {
                type: String,
                value: "/src/elements/rock-entity-todo/demo/entities.json"                                
            }
        }
    });   
</script>
</dom-module>
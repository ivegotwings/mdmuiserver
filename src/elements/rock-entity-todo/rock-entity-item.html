<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../pebble-icon/pebble-icon.html">
<link rel="import" href="../pebble-icons/pebble-icons.html">

<!--
`<rock-entity-item>` Represents an element that displays an icon and text.

Example:

  <rock-entity-item id="entity-todo" 
                      icon-fill-color="[[item.icon.fillcolor]]" 
                      icon-stroke-color="[[item.icon.strokecolor]]"
                      icon-outer-color="[[item.icon.outerbgcolor]]"
                      icon-margin="[[item.icon.margin]]"
                      icon="[[item.icon.name]]" 
                      message="[[item.message]]">
  </rock-entity-item>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--entity-icon-width` | The entity icon width | 20px
`--entity-icon-height` | The entity icon height | 20px
`--entity-icon-fill-color` | The entity icon fill color | ``
`--entity-icon-stroke-color` | The entity icon stroke color | ``
`--entity-container` | Mixin applied for entity container | {}
`--entity-icon-outer-circle` | Mixin applied for entity icon outer circle | {}
`--entity-content` | Mixin applied for entity content | {}

@group rock Elements
@element rock-entity-item
@demo demo/index.html
-->

<dom-module id="rock-entity-item">
    <template>
      <style is="custom-style" include="iron-flex iron-flex-alignment">      
        .container{
            @apply(--layout-horizontal);             
            align-items: center;
            max-height: 250px;
            max-width: 288px;
            margin: 10px;            
            @apply(--entity-container);
        }

        .entity-icon-outer{
            @apply(--layout);
            @apply(--layout-center-center);
            @apply(--paper-font-common-base); 
            padding: 5px;              
            border-radius: 50%;            
            width: 24px;
            height: 24px;
            margin-right: 10px;
            cursor: pointer;
            background-color: var(--icon-outer-bg-color);
            @apply(--entity-icon-outer-circle);
        }

        .entity-content{
            align-self: flex-center;            
            cursor: pointer;         
            @apply(--entity-content);
        }

        pebble-icon {
        --pebble-icon-width: var(--entity-icon-width, 20px);
        --pebble-icon-height: var(--entity-icon-height, 20px);
        --pebble-icon-margin: var(--entity-icon-margin);
        --pebble-icon-fill-color: var(--entity-icon-fill-color);
        --pebble-icon-stroke-color: var(--entity-icon-stroke-color);      
        }
     </style>
    
    <div class="container">
        <div class="entity-icon-outer" data="[[data]]" on-tap="_onTap">
            <pebble-icon icon="[[icon]]"></pebble-icon>
        </div>    
        <div class="entity-content" data="[[data]]" on-tap="_onTap">
            [[message]]
        </div>
    </div>

</template>

<script>
    Polymer({
        is: 'rock-entity-item',

        properties: {           

            /**
             * Specifies icon to display.
             */
            icon: {
                type: String,
                value: 'pebble-icons:WarningMessage'
            },

            iconFillColor: {
                type: String,
                value: null,
                observer: '_onIconStyleChange'
            },

            iconStrokeColor: {
                type: String,
                value: null,
                observer: '_onIconStyleChange'
            },

            iconOuterColor: {
                type: String,
                value: null,
                observer: '_onIconStyleChange'
            },

            iconMargin: {
                type: String,
                value: null,
                observer: '_onIconStyleChange'
            },

            /**
             * Indicates entity item message
             */
            message: {
                type: String,
                value: null
            }

        },

        _onIconStyleChange: function(){
            this.customStyle['--entity-icon-fill-color'] = this.iconFillColor;
            this.customStyle['--entity-icon-stroke-color'] = this.iconStrokeColor;
            this.customStyle['--icon-outer-bg-color'] = this.iconOuterColor;
            this.customStyle['--entity-icon-margin'] = this.iconMargin;
            this.updateStyles();
        },

        /**
         * Raise on-tap events as per configuration
         */
        _onTap: function (e) {
            var eventDetail = {
                name: e.currentTarget.data.eventName,
                data: e.currentTarget.data
            }

            this.fire('bedrock-event', eventDetail);
        },

    });   
</script>
</dom-module>
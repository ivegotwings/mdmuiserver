<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="pebble-step-vertical.html">

<!--
`pebble-step` represents an element child to `pebble-stepper` element. Each step in the given flow to `pebble-stepper`
is a `pebble-step`.
-->
<dom-module id="pebble-step">
  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
      }
    </style>
      <pebble-step-vertical id="stepLabel" opened="[[opened]]" selected-step="[[selectedStep]]" data="{{data}}">
        <content></content>
      </pebble-step-vertical>
  </template>

  <script>
    Polymer({

      is: 'pebble-step',

      properties: {
        /**
         * Represents opened/closed state of the step.
         */
        opened: {
          type: Boolean,
          value: false
        },
        /**
         * Indicates layout of the step and its child steps.
         */
        vertical: {
          type: Boolean,
          readOnly: true,
          reflectToAttribute: true
        },
        /**
         * Represents model given to the step.
         */
         data: {
           type: Array,
           value: null
         },
         /**
         * Indicates number of total steps in the given flow.
         */
         steps: {
           type: Number,
           value: null
         },
         /**
         * Represents index value of the current step.
         */
         index: {
           type: Number,
           value: null
         },
         /**
         * Represents index value of the selected step.
         */
         selectedStep: {
           type: Number,
           value: null
         },
      },

      observers: [
        '_toggleClassPosition(index)'
      ],

       _toggleClassPosition: function(index) {
        this.async(function() {
          this.toggleClass('first-step', (index == 1), this.$$('#stepLabel'));
          this.toggleClass('last-step', (index == this.steps), this.$$('#stepLabel'));
        });
      },
    });

  </script>
</dom-module>

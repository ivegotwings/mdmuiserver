<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="pebble-step-vertical.html">

<!--
`pebble-step` Represents a child element to the `pebble-stepper` element. 
Each step that is indicating the given flow in the `pebble-stepper`
is a `pebble-step`.
-->
<dom-module id="pebble-step">
  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
      }
    </style>
      <pebble-step-vertical id="stepLabel" opened="[[opened]]" data="{{data}}">
        <content></content>
      </pebble-step-vertical>
  </template>

  <script>
    Polymer({

      is: 'pebble-step',

      properties: {
        /**
         * Indicates the open or closed state of the step.
         */
        opened: {
          type: Boolean,
          value: false
        },
        /**
         * Indicates the layout of the step and its child steps.
         */
        vertical: {
          type: Boolean,
          readOnly: true,
          reflectToAttribute: true
        },
        /**
         * Indicates the model given to the step.
         */
         data: {
           type: Array,
           value: null
         },
         /**
         * Indicates the number of total steps in the given flow.
         */
         steps: {
           type: Number,
           value: null
         },
         /**
         * Indicates an index value of the current step.
         */
         index: {
           type: Number,
           value: null
         }
      },

      observers: [
        '_toggleClassPosition(index)'
      ],

       _toggleClassPosition: function(index) {
        this.async(function() {
          this.toggleClass('first-step', (index == 1), this.$$('#stepLabel'));
          this.toggleClass('last-step', (index == this.steps), this.$$('#stepLabel'));
        });
      },
    });

  </script>
</dom-module>

<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">
<link rel="import" href="../pebble-styles-app/pebble-styles-app.html">
<link rel="import" href="../rock-api-healthcheck-status-item/
rock-api-healthcheck-status-item.html">
<link rel="import" href="../pebble-button/pebble-button.html">

<dom-module id="rock-api-healthcheck-status-list">
  <template>
    <custom-style>
      <style include="pebble-styles-shared">
        .block {
          padding: 0 20px;
        }

        .iconButton {
          --iron-icon: {
            margin: 0!important;
          }
        }
      </style>
    </custom-style>
    <div class="block">
      <pebble-button icon="pebble-md-icons:ToolbarRefresh" id="statusIcon" noink class="pull-right iconButton btn btn-primary m-b-10"
        on-click="_handleReload"></pebble-button>
      <template id="statusListTemplate" is="dom-repeat" items="{{calls}}">
        <rock-api-healthcheck-status-item name="{{item.name}}" url="{{item.url}}" status="false">
        </rock-api-healthcheck-status-item>
      </template>
    </div>
  </template>
  <script>
    Polymer({
      is: 'rock-api-healthcheck-status-list',
      ready: function () {

      },
      _validChanged(newValue, oldValue) {
        // console.log(newValue);
        // console.log(oldValue);
      },
      _handleRepeaterReload() {
        return valid
      },
      properties: {
        name: {
          type: String,
          value: null
        },
        storeCalls: {
          type: Object
        },
        valid: {
          type: Boolean,
          value: false,
          notify: true,
          observer: "_validChanged"
        },
        calls: {
          type: Array,
          value: [],
          observer: "_onCallsChanged"
        }
      },
      attached: function () {
        this.set('valid', true);
      },
      _onCallsChanged: function () {
        //this.$.statusListTemplate.render();
      },
      _handleReload: function () {
        var temp = JSON.parse(JSON.stringify(this.calls));
        this.calls = [];
        this.$.statusListTemplate.render();
        this.calls = temp;
      }

    });
  </script>
</dom-module>
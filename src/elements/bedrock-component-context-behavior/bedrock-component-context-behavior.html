<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../bedrock-helpers/component-helper.html">
<link rel="import" href="../bedrock-externalref-falcor/bedrock-externalref-falcor.html">

<script>
    /*
    * @demo demo/index.html
    * @polymerBehavior RUFBehaviors.ComponentContextBehavior
    */
    var RUFBehaviors = RUFBehaviors || {};
    
    RUFBehaviors.ComponentContextBehavior = {
        /**
         * This is to hide the current element from the dom 
         */
        hostAttributes: {
            hidden: true
        },
        attached: function () { },
        ready: function () { },
        properties: {
            contextData: {
                type: Object,
                value: function () {
                    return {};
                }
            }      
        },
        getContexts: function(contextType) {
            return this.contextData[contextType] !== undefined ? this.contextData[contextType] : [];
        },
        getFirstContext: function (contextType) {
            var contexts = this.contextData[contextType];
            if(contexts && contexts.length > 0) {
                return contexts[0];
            }

            return undefined;
        },
        getDataContexts: function () {
            return this.getContexts(this.CONTEXT_TYPE_DATA);
        },
        getItemContexts: function () {
            return this.getContexts(this.CONTEXT_TYPE_ITEM);
        },
        getValueContexts: function () {
            return this.getContexts(this.CONTEXT_TYPE_VALUE);
        },
        getUserContexts: function() {
            return this.getContexts(this.CONTEXT_TYPE_USER);
        },
        getAppInstanceContexts : function() {
            return this.getContexts(this.CONTEXT_TYPE_APP_INSTANCE);
        },
        getFirstDataContext: function () {
            return this.getFirstContext(ContextHelper.CONTEXT_TYPE_DATA);
        },
        getFirstValueContext: function () {
            return this.getFirstContext(ContextHelper.CONTEXT_TYPE_VALUE);
        },
        getFirstItemContext: function () {
            return this.getFirstContext(ContextHelper.CONTEXT_TYPE_ITEM);
        }
    };

</script>
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../liquid-behavior/liquid-behavior.html">
<!--
`liquid-config-getdata`
Boolean control

@demo demo/index.html 
-->
<dom-module id="liquid-config-getdata">
    <template>
    </template>
    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'liquid-config-getdata',
                behaviors: [RUFBehaviors.LiquidBehavior],
                attached: function () {
                },
                ready: function () {
                },
                properties: {
                    _dataChannelName: {
                        type: String,
                        value: "configDataChannel",
                        readonly: true
                    }
                },
                _executeRequest: function (model, request) {
                    var op = request.operation,
                        reqId = request.requestId === undefined ? '' : request.requestId,
                        reqData = request.requestData;

                    if (op === 'getconfigs') {
                        return this._callGetconfigs(model, reqData);
                    }
                    else {
                        throw 'exception: operation ' + op + ' is not supported in ' + this.is + ' element.';
                    }
                },
                _formatResponse: function(request, rawResponsePkg){
                    var op = request.operation;

                    if (op === 'getconfigs') {
                        var pathRootKey = "configs";
                        var configs = rawResponsePkg.json[pathRootKey];
                        var formattedConfigs = this._formatconfigData(configs);
                        return {'configs': formattedConfigs};
                    }
                },
                _formatconfigData: function(configs){
                    return configs;
                },
                _callGetconfigs: function (model, reqData) {
                    if (reqData === undefined || reqData.data === undefined) {
                        return;
                    }

                    if (this.verbose) {
                        console.log('Request for get configs call...request: ', reqData);
                    }

                    var pathRootKey = "configs";

                    var path1 = [pathRootKey, ["cf1", "cf2"]];
                   // var path2 = [pathRootKey, configIds, "data", "ctxInfo", contextKeys, "attributes", attrs, "values"];

                    return model.get(path1);
                }
            });
        })();
    </script>
</dom-module>
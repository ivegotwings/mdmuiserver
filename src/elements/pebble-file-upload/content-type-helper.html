<link rel="import" href="../../../bower_components/polymer/polymer.html">
<script src="content-types-mappings.js"></script>

<script>

    ContentTypeHelper = {};

    (function() {

        ContentTypeHelper.Mappings = ContentTypeUtils.PopulateMaps();
        ContentTypeHelper.Extensions = ContentTypeHelper.Mappings.extensions;
        ContentTypeHelper.MimeTypes = ContentTypeHelper.Mappings.mimeTypes;

        ContentTypeHelper.getExtensions = function(mimeTypes) {
            if(!_.isEmpty(mimeTypes)) {
                let extensions = [];
                for(let i=0; i<mimeTypes.length; i++) {
                    let mimeType = mimeTypes[i];
                    let mappedExtensions = ContentTypeHelper.getExtension(mimeType);
                    if(mappedExtensions) {
                        extensions = extensions.concat(mappedExtensions);
                    }
                }
                return extensions;
            }
        };

        ContentTypeHelper.getExtension = function(mimeType) {
            return ContentTypeHelper.Extensions[mimeType];
        };

        ContentTypeHelper.getMimeTypes = function(extensions) {
            if(!_.isEmpty(extensions)) {
                let mimeTypes = [];
                for(let i=0; i<extensions.length; i++) {
                    let extension = extensions[i];
                    let mappedMimeType = ContentTypeHelper.getMimeType(extension);
                    if(mappedMimeType) {
                        mimeTypes.push(mappedMimeType);
                    }
                }
                return mimeTypes;
            }
        };

        ContentTypeHelper.getMimeType = function(extension) {
            return ContentTypeHelper.MimeTypes[extension];
        };

        ContentTypeHelper.getContentTypes = function(fileTypes) {
            let mimeTypes = ContentTypeHelper.getMimeTypes(fileTypes);
            let contentTypes = undefined;
            if(!_.isEmpty(mimeTypes)) {
                for(let i=0; i<mimeTypes.length; i++) {
                    let mimeType = mimeTypes[i];
                    if(contentTypes) {
                        contentTypes = contentTypes + "," + mimeType;
                    } else {
                        contentTypes = mimeType
                    }
                }
            }
            return contentTypes;
        }
    })();
</script>
<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../pebble-icon/pebble-icon.html">
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">

<!--
`<rock-header-search>` Represents a textbox with search icon that provides the global search.

### Example

    <rock-header-search></rock-header-search>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|---------
`--search-box-width` | The width of the search box | 290px
`--search-box-height` | The height of the search box | 20px
`--search-box-border` | The border of the serach box | 1px solid #7d8690
`--search-box-radius` | The radius of the search box | 4px
`--search-box-padding` | The padding of the search box | 2px
`--search-box` | Mixin applied to search box | {}
`--search-icon-fill-color` | The fill color of search icon | #09c021
`--search-icon-stroke-color` | The stroke color of search icon | ''
`--search-icon-margin` | The margin of search icon | 3px 0 0 -28px
`--search-action-icon` | Mixin applied to search icon | {}
`--search-action-hover-pointertype` | The pointer type for serach icon | pointer

@group rock Elements
@element rock-header-search
@demo demo/index.html
-->

<dom-module id="rock-header-search">
    <template>
        <style include="pebble-styles-shared"></style>
        <style is="custom-style">

      :host > paper-icon-button {
        margin-right: 13px;
      }

      .rock-search-form {
        display: none;
        width: 100%;
        height: 100%;
        position: absolute;
        left: 0;
        top: 0;
        padding: 0 40px 0 74px;
        box-sizing: border-box;
        background: #ffffff;
        z-index: 2;
      }
      
      .rock-search-form[show] {
        display: block;
      }

      .search-input {
        width: 233px;
        height: 24px;
        border-radius: 3px;
        background-color: var(--palette-white);
        line-height: 0.83;
        padding-left: 10px;
        padding-right: 24px;
        border: solid 1px var(--palette-white);
        font-family:var(--default-font-family);
        box-sizing: border-box;
        font-size: var(--font-size-sm, 12px);
        display: block;
      } 

      .search-action {
        position: absolute;
        top: 2px;
        right: 2px;       
      }
      .search-action::shadow iron-icon{
        height: var(--search-action-size, 20px);
        margin: 0;
        position: absolute;
        top: 2px;
        right: 2px;
        fill: var(--top-header-search-icon-color);
      }
      
      .search-action:hover {
        cursor: var(--search-action-hover-pointertype, pointer);
      }

    </style>

<input id="searchInput" type="text" value="{{inputValue::input}}" placeholder="{{placeHolder}}" on-keyup="_searchOnEnter"
    class="search-input">
<pebble-icon icon="pebble-md-icons:Searchsmall" on-mousedown="_searchInGoogle" class="search-action pebble-md-icons"></pebble-icon>

</template>

<script>
    (function () {
        'use strict';

        Polymer({
            is: 'rock-header-search',

            properties: {

                /*
                 * Indicates a placeholder for the search.
                 */
                placeHolder: {
                    type: String,
                    value: "Search MDMCenter"
                },

                /*
                 * Indicates the input value for the search.
                 */
                inputValue: {
                    type: String,
                    value: ""
                },

                /*
                * Indicates the search action icon.
                */
                icon: {
                    type: String,
                    value: "pebble-icons:SearchArrow"
                }

            },

            /*
             * Can be used to open a global search page.
             */
            _searchInGoogle: function () {
                window.open('https://www.google.com/search?q=' + this.inputValue);
                this.inputValue = '';
            },

            /*
             * Can be used to execute search on enter.
             */
            _searchOnEnter: function (e) {
                if (e.keyCode === 13) {
                    this._searchInGoogle();
                }
            }
        });
    })();
</script>

</dom-module>
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../pebble-icon/pebble-icon.html">

<!--
`<rock-header-search>` Represents a textbox with search icon, which provides search globally.

Example:

    <rock-header-search></rock-header-search>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|---------
`--search-box-width` | The width of the search box | 290px
`--search-box-height` | The height of the search box | 20px
`--search-box-border` | The border of the serach box | 1px solid #7d8690
`--search-box-radius` | The radius of the search box | 4px
`--search-box-padding` | The padding of the search box | 2px
`--search-box` | Mixin applied to search box | {}
`--search-icon-fill-color` | The fill color of search icon | #09c021
`--search-icon-stroke-color` | The stroke color of search icon | ''
`--search-icon-margin` | The margin of search icon | 3px 0 0 -28px
`--search-action-icon` | Mixin applied to search icon | {}
`--search-action-hover-pointertype` | The pointer type for serach icon | pointer

@group rock Elements
@element rock-header-search
@demo demo/index.html
-->

<dom-module id="rock-header-search">
  <template>
    <style include="shared-styles"></style>
    <style is="custom-style">

      .search-input {
        width: var(--search-box-width, 200px);
        height: var(--search-box-height, 20px);
        border: var(--search-box-border, 1px solid #7d8690);
        border-radius: var(--search-box-radius, 4px);
        padding: var(--search-box-padding, 2px);
        apply(--search-box);
      } 

      .search-action {
        --pebble-icon-fill-color: var(--search-icon-fill-color, #09c021);
        --pebble-icon-stroke-color: var(--search-icon-stroke-color);
        --pebble-icon-margin: var(--search-icon-margin, 3px 0 0 -28px);
        --pebble-icon: apply(--search-action-icon);
      } 
      
      .search-action:hover {
                cursor: var(--search-action-hover-pointertype, pointer);
            }

    </style>
          
            <input id="searchInput"
                   type="text"                 
                   value="{{inputValue::input}}" 
                   placeholder="{{placeHolder}}"
                   on-keyup="_searchOnEnter"
                   class="search-input">
            <pebble-icon icon="{{icon}}" on-mousedown="_searchInGoogle" class="search-action"></pebble-icon>         
    
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'rock-header-search',

        properties: {

          /*
           * Indicates search placeholder
           */
          placeHolder: {
            type: String,
            value: ""
          },

          /*
           * Indicates input value of the search
           */
          inputValue: {
            type: String,
            value: ""
          },

           /*
           * Indicates search action icon
           */
          icon: {
            type: String,
            value: "pebble-icons:search-arrow"
          }

        },

        /*
         * Search given text in google
         */
        _searchInGoogle: function() { 
          window.open('https://www.google.com/search?q=' + this.inputValue);
          this.inputValue = '';
        },

        /*
         * Execute search on enter
         */
        _searchOnEnter: function(e) {         
          if (e.keyCode === 13) {
            this._searchInGoogle();
          }
        }
      });
    })();
  </script>

</dom-module>

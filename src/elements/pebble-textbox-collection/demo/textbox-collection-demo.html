<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="../../bedrock-pubsub/bedrock-pubsub.html">
<link rel="import" href="../../bedrock-ui-behavior/bedrock-ui-behavior.html">

<link rel="import" href="../pebble-collection-container.html">

<dom-module id="textbox-collection-demo">
    <template>
            <bedrock-pubsub event-name="on-tap-arrow-icon" handler="_onTapArrowIcon"></bedrock-pubsub>
            <bedrock-pubsub event-name="on-tap-tag" handler="_onTapTag"></bedrock-pubsub>
            <bedrock-pubsub event-name="on-tag-remove" handler="_onTagRemove"></bedrock-pubsub>
            <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
            <pebble-collection-container values='{{selectedItems}}' label="LOV Collection">
                <pebble-lov id="multi-select-lov" 
                            items="{{items}}" 
                            multi-select
                            show-image
                            selected-items="{{selectedItems}}">
                </pebble-lov>
            </pebble-collection-container>            
    </template>
    <script>
        Polymer({
            is: "textbox-collection-demo",

            properties: {
                selectedItems: {
                    type: Array,
                    value: function () {
                        return [];
                    },
                    notify: true
                }
            },

            behaviors: [
                RUFBehaviors.UIBehavior
            ],

            _onTapArrowIcon: function(){
                this.$$('pebble-collection-container').openPopover();
            },

            _onTapTag: function(){
                //When tag tapped                
            },

            _onTagRemove: function(){
                //When tag removed                
                var _selectedItems = this.selectedItems;
                this.selectedItems = [];
                this.selectedItems = _selectedItems;
            }           
        })
    </script>
</dom-module>
<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-component-context-behavior/bedrock-component-context-behavior.html">
<link rel="import" href="../bedrock-pubsub/bedrock-pubsub.html">
<link rel="import" href="../bedrock-style-manager/styles/bedrock-style-common.html">

<link rel="import" href="../pebble-button/pebble-button.html">
<link rel="import" href="../pebble-dialog/pebble-dialog.html">
<link rel="import" href="../pebble-vertical-divider/pebble-vertical-divider.html">

<link rel="import" href="../rock-attribute-mapping-grid/rock-attribute-mapping-grid.html">

<!--
<b><i>Content development is under progress... </b></i>

@demo demo/index.html
-->

<dom-module id="rock-attribute-mapping">
    <template>

        <style include="bedrock-style-common">
            :host{
                display: block;
                height:100%;
            }
        </style>
        <rock-attribute-mapping-grid taxonomy="[[taxonomy]]" context-data="[[contextData]]" mapping-config="[[mappingConfig]]" mapping-data="[[mappingData]]" cop-context="[[copContext]]"></rock-attribute-mapping-grid>
    </template>
    <script>
        (function() {
            'use strict';

            Polymer({
                is: "rock-attribute-mapping",

                properties: {
          /**
            * <b><i>Content development is under progress... </b></i> 
            */
                    contextData: {
                        type: Object,
                        value: function() { return {}; }
                    },

                    businessFunctionData: {
                        type: Object,
                        value: function() { return {}; },
                        observer: "_onBusinessFunctionDataChange"
                    },
          /**
            * <b><i>Content development is under progress... </b></i> 
            */
                    mappingConfig: {
                        type: Object,
                        value: function() { return {}; }
                    },

                    mappingData: {
                        type: Object,
                        value: function() { return {}; }
                    },

                    taxonomy: {
                        type: String
                    },
                    copContext: {
                        type: Object,
                        value: function() { return {}; }
                    }
                },

                _onBusinessFunctionDataChange() {
                    if(!_.isEmpty(this.businessFunctionData) && this.businessFunctionData["attribute-mapping-data"]) {
                        this.mappingData = this.businessFunctionData["attribute-mapping-data"];
                        this.taxonomy = this.businessFunctionData["attribute-mapping-data"].taxonomy;
                    }
                }
            });
        })();
    </script>
</dom-module>
<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../liquid-rest.html">

<dom-module id="liquid-rest-demo">
    <template>
        <liquid-rest id="rest1" url="/data/cop/transform" auto$="[[auto]]" verbose 
            method="POST" request-data={{request}}
            on-response="_onResponseReceived" on-error="_onResponseFailed"></liquid-rest>
    </template>
    <script>
        (function () {
            'use strict';
            Polymer({
                is: 'liquid-rest-demo',
                properties: {
                    auto: {
                        type: Boolean,
                        value: false
                    },
                    request: {
                        type: Object,
                        value: function () {
                            return {
                                "fileName": "small.xlsx"
                            };
                        }
                    }
                },
                generateRequest: function () {
                    this.shadowRoot.querySelector('#rest1').generateRequest();
                },
                _onResponseReceived: function (e) {
                    console.log('response received ', JSON.stringify(e.detail.response, null, 4));
                },
                _onResponseFailed: function (e) {
                    Polymer.Base._error('rest call failed with error ', e.detail);
                }
            });
        })();
    </script>
</dom-module>
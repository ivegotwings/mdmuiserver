<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-pubsub/bedrock-pubsub.html">

<link rel="import" href="../pebble-icon/pebble-icon.html">
<link rel="import" href="../pebble-button/pebble-button.html">
<link rel="import" href="../pebble-popover/pebble-popover.html">
<link rel="import" href="../pebble-lov/pebble-lov.html">
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">

<link rel="import" href="../rock-search-bar/rock-search-bar.html">
<link rel="import" href="../rock-grid/rock-grid.html">
<link rel="import" href="../rock-entity-search-filter/rock-entity-search-filter.html">

<!--
`<rock-job-attribute-detail>`

@group rock Elements
@element rock-job-attribute-detail
@demo demo/index.html
-->

<dom-module id="rock-job-attribute-detail">
    <template>
        <style include="pebble-styles-shared"></style>
        <style is="custom-style">
            #searchBar{
                margin-bottom: 10px;
            }
            rock-grid {
                --rock-grid-container: {
                    margin:10px 0 0 0px;
                    padding-top: 3px;
                    border-spacing: inherit;
                    border: 1px solid var(--divider-color, #c1cad4);
                }
            }
            #container{
                margin: 10px;
            }

        </style>
        <div id="container">
        <!--TODO remove these iron-ajax after api integration-->
        <iron-ajax auto url="demo/config.json" handle-as="json" last-response="{{config}}"></iron-ajax>
        <iron-ajax auto url="demo/data.json" handle-as="json" last-response="{{data}}"></iron-ajax>
        <bedrock-pubsub event-name="rock-search" handler="_onSearch" target-id="searchBar"></bedrock-pubsub>
        <bedrock-pubsub event-name="rock-search-clear" handler="_onSearchClear" target-id="searchBar"></bedrock-pubsub>
        <rock-search-bar id="searchBar" placeholder="Enter Search text"></rock-search-bar>
        <rock-entity-search-filter id="searchFilter" _selected-search-filters="{{_selectedSearchFilters}}" context-data="{{contextData}}"
                                       types-criterion="[[_typesCriterion]]" tags="{{tags}}"></rock-entity-search-filter>
        <rock-grid no-header data="{{data}}" config="{{config}}"  page-size="10"></rock-grid>
        </div>
    </template>

    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'rock-job-attribute-detail',

                properties: {

                },
                behaviors: [
                    RUFBehaviors.UIBehavior
                ],
                _onSearch:function (e,detail) {
                    alert(detail);
                },
                _onSearchClear:function (e) {
                    alert("search cleared");
                }
            });
        })();
    </script>

</dom-module>
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../pebble-image-viewer/pebble-image-viewer.html">
<link rel="import" href="../pebble-flex-layout/pebble-flex-layout.html">

<!--
rock-notification-list represents to display notifications as list.

Example:

    <rock-notification-list notifications="jsonData" show-line-index="1"></rock-notification-list>

### Styling

The following custom properties and mixins are available for styling:

Custom property | Description | Default
----------------|-------------|----------
`--notification-image-size` | The notification image width and height | 40px
`--notification-item-max-width` | The notification item max width | `250px`
`--notification-item-max-height` | The notification item max height | `60px`
`--notification-item-padding` | The notification item padding | `2px`
`--notification-font-size` | The notification item font size | `12px`
`--notification-margin-bottom` | The notification item bottom margin | `10px`
`--notification-container-styles` | Mixin applied to the notification item container | `{}`
`--image-box-styles` | Mixin applied to the image box | `{}`
`--when-box-styles` | Mixin applied to the when box | `{}`
`--desc-box-styles` | Mixin applied to the description box | `{}`
`--profile-flex-verticle-max-width` | The notification "when" and "description" items verticle max width | `180px`

@group rock Elements
@element rock-notification-list
@demo demo/index.html
-->

<dom-module id="rock-notification-list">
  <template>
    <style is="custom-style" include="pebble-flex-layout">

      /*For sizing the image*/      
      .thumb-image {
        width: var(--notification-image-size, 40px);
        height: var(--notification-image-size, 40px);
      }
      
      /*Profile container style*/      
      .container {
        max-width: var(--notification-item-max-width, 250px);
        max-height: var(--notification-item-max-height, 60px);
        padding: var(--notification-item-padding, 2px);
        font-size: var(--notification-font-size, 12px);
        margin-bottom: var(--notification-margin-bottom, 10px);

        apply(--notification-container-styles);
      }

      /*For Image*/      
      .img-box {
        width: var(--notification-image-box-width, 60px);
        @apply(--image-box-styles);
      }

      /*For Name*/      
      .when-box {
        color: var(--notification-when-color, #928d8d);
        @apply(--when-box-styles);
      }

      /*For Description*/      
      .desc-box {
        color: var(--notification-desc-color, #000000);
        @apply(--desc-box-styles);
      }
      
      /*Notification horizontal div styles*/      
      .flex-horizontal {
        @apply(--layout-horizontal);
      }

      /*Notification verticle div styles*/      
      .flex-vertical {
        max-width: var(--profile-flex-verticle-max-width, 180px);
      }

      /*Notification content style*/      
      .box {
        display: flex;
        justify-content: left;
        align-items: center;
        align-content: left;
      }
    </style>

    <template is="dom-repeat" items="{{notifications}}">
      <template is="dom-if" if="{{_showLine(index)}}">
        <hr>
      </template>      
      <div class="container flex-horizontal">
        <!-- Image section -->
        <div class="img-box box">
          <pebble-image-viewer src="{{item.src}}" alt="text" shape="circle" sizing="contain" class="thumb-image"></pebble-image-viewer>
        </div>

        <!-- when & description section -->
        <div class="flex-vertical">
          <div class="when-box box">
            {{item.when}}
          </div>
          <div class="desc-box box">
            {{item.desc}}
          </div>
        </div>
      </div>
    </template>

  </template>

  <script>
    Polymer({
      is: 'rock-notification-list',

      properties: {

      /**
        List of notifications in JSON format
      */
      notifications: {
			type: Array,
			notify: true,
      //Below value is dummy data, in live it will be removed
      value: [{"src": "/src/images/no-photo.jpg", "alt": "Notification", "when": "2 hrs ago", "desc": "Delete drafts in #1500000"}, {"src": "/src/images/no-photo.jpg", "alt": "Notification", "when": "November 15, 2016", "desc": "2 merchandising import"}, {"src": "/src/images/no-photo.jpg", "alt": "Notification", "when": "August 01, 2016", "desc": "10 items failed validation"}, {"src": "/src/images/no-photo.jpg", "alt": "Notification", "when": "Apr 10, 2016", "desc": "Delete drafts in #1500000"}]
		  },

      /*
        Show a line above an item in the list
      */
      showLineIndex: {
        type: Number,
        value: -1        
      }

	  },	  

    /*Show a line above an item in the list*/
    _showLine: function(index){
         return index == this.showLineIndex;
    },
    });   
  </script>
</dom-module>
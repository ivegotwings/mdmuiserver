<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../bedrock-pubsub/bedrock-pubsub.html">
<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-component-context-behavior/bedrock-component-context-behavior.html">

<link rel="import" href="../liquid-entity-model-get/liquid-entity-model-get.html">
<link rel="import" href="../liquid-rest/liquid-rest.html">

<link rel="import" href="../pebble-spinner/pebble-spinner.html">
<link rel="import" href="../pebble-button/pebble-button.html">
<link rel="import" href="../pebble-card/pebble-card.html">
<link rel="import" href="../pebble-styles-shared/pebble-styles-shared.html">

<link rel="import" href="../rock-scope-selector/rock-scope-selector.html">
<!--
<b><i>Content development is under progress... </b></i>

@demo demo/index.html
-->
<dom-module id="rock-scope-manage">
    <template>
        <style include="pebble-styles-shared">
            .message {
                text-align: center;
            }

            .buttonSection {
                text-align: center;
            }

            #card{
                height: 100%;
                padding-bottom:20px;
            }
            pebble-card{
                --pebble-card-widget-box:{
                    height:100%;
                    padding-bottom: 10px;
                    margin:0 0 0 0;
                    min-width:auto;
                }
            }
            .card-content
            {
                height: 100%;
                overflow: hidden;
            }

        </style>
        <pebble-spinner active="[[_loading]]"></pebble-spinner>
        <div class="message">[[_message]]</div>
        <pebble-card id="card" no-header>
            <rock-scope-selector id="scopeSelector" context-data="[[contextData]]" show-title allow-manage-scope show-settings>
            </rock-scope-selector>
            <bedrock-pubsub event-name="rock-scope-click" handler="_onScopeTagClicked"></bedrock-pubsub>
        </pebble-card>
        </div>
    </template>
    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'rock-scope-manage',

                properties: {

                    /**
                     * <b><i>Content development is under progress... </b></i>
                     */
                    contextData: {
                        type: Object,
                        value: function () {
                            return {};
                        }
                    },

                    _loading: {
                        type: Boolean,
                        value: false
                    },

                    _message: {
                        type: String
                    }
                },

                behaviors: [
                    RUFBehaviors.UIBehavior,
                    RUFBehaviors.ComponentContextBehavior
                ],

                observers: [],

                _onScopeTagClicked: function (e, detail) {
                    console.log(JSON.stringify(detail));
                },

                _triggerFinishStep: function (isJob) {
                    //Final step share data logic should place here
                }
            });
        })();
    </script>
</dom-module>
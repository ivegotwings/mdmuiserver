<!--
`<pebble-dialog>` Represents a dialog with material design styling and optional animations when it is
opened or closed. It provides styles for a header, content area, and an action area for buttons.

The following code implements a dialog with a header, scrolling content area and
buttons. The focus is on the `dialog-confirm` button when the dialog is opened.

### Example
    <pebble-dialog>
      <h2>Header</h2>
        Lorem ipsum...
      <div class="buttons">
        <paper-button dialog-dismiss>Cancel</paper-button>
        <paper-button dialog-confirm autofocus>Accept</paper-button>
      </div>
    </pebble-dialog>

### Styling

Custom property    | Description              | Default
-------------------|-------------|-------------
`--dialog-layout`  | Mixin applied to #dialog | `{}`


@group pebble Elements
@element pebble-dialog
@demo demo/index.html
-->
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-dialog/paper-dialog.html">

<dom-module id="pebble-dialog">
    <template>
        <style>
         #dialog {
                @apply(--dialog-layout);
                border-radius: 3px;
                box-shadow: 0 0 8px 0 #c1cad4;
            }
            /* Styles for PebbleDialog */
            .dialogTitle
            {
                position: relative;
                font-family:var(--default-font-family);
                border-radius:2px;
                height: 24px;
                font-size:var(--default-font-size) !important;
            }
            #closeIcon{
            position: relative;
            float:right;
            right: -18px;
            top: -74px;
            }
            
      pebble-button::shadow paper-button{
          background-color:var(--button-bg-color);
          color:var(--button-text-color);
          height: 32px;
      }
      .buttonWhite::shadow paper-button{
          background-color:#fff;
          height: 32px;
          color:var(--color-steal-grey);
          font-weight:normal;
          border:1px solid var(--cloudy-blue-color);
      }
      .buttons
      {
          float:right;
      }
        </style>
<paper-dialog id="dialog" modal="[[modal]]" position-target="[[positionTarget]]" horizontal-align="[[horizontalAlign]]" vertical-align="[[verticalAlign]]"
    dynamic-align="[[dynamicAlign]]" no-overlap="[[noOverlap]]" vertical-offset="[[verticalOffset]]" horizontal-offset="[[horizontalOffset]]"
    no-cancel-on-outside-click="[[noCancelOnOutsideClick]]" no-cancel-on-esc-key="[[noCancelOnEscKey]]">
    <h2 class="dialogTitle">[[dialogTitle]]</h2>

    <!-- Close Dialog -->
    <template is="dom-if" if="[[!nonClosable]]">
        <div id="closeIcon">
            <paper-icon-button id="close" name="close" icon="pebble-icons:Page-1" title="Remove" on-tap="_close" title="Close" class="icon"
                role="button" tabindex="0" aria-disabled="false"></paper-icon-button>
        </div>
    </template>

    <content></content>

    <!-- Yes Button -->
    <template is="dom-if" if="[[!nonYes]]">
        <div class="buttons">
            <pebble-button button-text="[[buttonTextYes]]" on-tap="_confirm" raised elevation="0">

            </pebble-button>
    </template>
    <!-- Cancel Button -->
    <template is="dom-if" if="[[!nonCancelable]]">
        <div class="buttons">
            <pebble-button button-text="[[buttonTextNo]]" class="buttonWhite" dialog-dismiss raised elevation="0"></pebble-button>
        </div>
    </template>

</paper-dialog>
</template>
<script>
    Polymer({
        is: "pebble-dialog",

        properties: {
            /**
              * Indicates whether or not the dialog is modal.
              * If it is set to <b>true</b>, then this implies no-cancel-on-outside-click, no-cancel-on-esc-key, and with-backdrop.
              */
            modal: {
                type: Boolean
            },

            /**
            * Indicates the orientation against which the element are aligned horizontally relative to the positionTarget.
            * The possible values are left, right, and auto.
            */
            horizontalAlign: {
                type: String
            },

            /**
            * Indicates the orientation against which the element are aligned vertically relative to the positionTarget.
            * The possible values are top, bottom, and auto.
            */
            verticalAlign: {
                type: String
            },

            /**
             * Indicates the alignment of dialog dynamically.
             * If it is set to <b>true</b>, then it uses horizontalAlign and verticalAlign values as preferred alignment.
             * If there is not enough space, then it picks the values, which minimizes the cropping.
             */
            dynamicAlign: {
                type: Boolean,
            },


            /**
            * Indicates whether or not to position the element around the positionTarget without overlapping it.
            */
            noOverlap: {
                type: Boolean
            },

            /**
            * Indicates the element that is used to position the dialog control. If it is not set, then it defaults to the parent node.
            */
            positionTarget: {
                type: Element,
                observer: '_positionTargetChanged'
            },

            /**
            * Indicates the vertical positioning. It is same as setting margin-top and margin-bottom css properties. 
            */
            verticalOffset: {
                type: Number
            },

            /**
            * Indicates horizontal positioning. It is same as setting margin-left and margin-right css properties.
            */
            horizontalOffset: {
                type: Number
            },
            noCancelOnOutsideClick: {
                type: Boolean
            },

            noCancelOnEscKey: {
                type: Boolean
            },
            /* Specifies whether the card container can be closed or not.
             * If it is set to <b>true</b>, then the card container cannot be closed.
             */
            nonClosable: {
                type: Boolean,
                value: false
            },
            nonYes: {
                type: Boolean,
                value: false
            },
            dialogTitle: {
                type: String,
                value: 'Title'
            },
            buttonTextYes: {
                type:String,
                value:'Yes'
            },
            buttonTextNo:{
                type:String,
                value:'No'
            },
            nonCancelable: {
                type: Boolean,
                value: false
            },
        },
        /**
        * Can be used to open the overlay.
        */
        open: function () {
            this.$.dialog.open();
        },

        _confirm: function () {
                var contentView = document.querySelector("main-app").$$("rock-content-view-manager").$$("rock-content-view:not([hidden])");
                this.$.dialog.close();
                contentView.render();

            },
        _close: function () {
            this.$.dialog.close();
        },

        _positionTargetChanged: function () {
            this.$.dialog.style.margin = "0px";
        },
    });
</script>
</dom-module>
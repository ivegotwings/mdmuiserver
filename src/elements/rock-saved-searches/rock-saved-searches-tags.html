<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../pebble-button/pebble-button.html">
<dom-module id="rock-saved-searches-tags">
    <template>
        <style include="pebble-styles-shared"></style>
        <template is="dom-if" if="[[_savedSearchesButtons.length]]]]">
            <template is="dom-repeat" items="[[_savedSearchesButtons]]" as="savedSearch">
                <pebble-button class="action" noink raised action-menu elevation="0" horizontal-align="right" vertical-align="top" icon="[[savedSearch.icon]]"
                    button-text="[[savedSearch.name]]" data="[[savedSearch]]" actions-data="[[_getActionData(_actionsData)]]">
                </pebble-button>
            </template>
        </template>
        <template is="dom-if" if="[[!_savedSearchesButtons.length]]">
            <div>You don't have any [[savedSearchCategory]] yet.</div>
        </template>
    </template>
    <script>
        (function () {
            'use strict';

            Polymer({

                is: 'rock-saved-searches-tags',

                properties: {
                    /*
                     * This property represents the name of the saved search category for which the tags has to be loaded
                     */
                    savedSearchCategory: {
                        type: String
                    },

                    /**
                     * Indicates saved searches
                     */
                    savedSearches: {
                        type: Object,
                        notify: true,
                        value: function () {
                            return {}
                        },
                        observer: '_loadSavedSearches'
                    },
                    _savedSearchesButtons: {
                        type: Array,
                        notify: true,
                        value: function () {
                            return []
                        },
                    },
                    _actionsData: {
                        type: Object,
                        notify: true,
                        value: function () {
                            return {}
                        }
                    }
                },
                behaviors: [
                    RUFBehaviors.UIBehavior
                ],
                ready: function () {
                    this._actionsData = this.getParentAppConfig('rock-saved-searches-tags');
                },
                _loadSavedSearches: function () {
                    if (this.savedSearches) {
                        this._savedSearchesButtons = this.savedSearches[this.savedSearchCategory];
                    }
                },
                _getActionData: function () {
                    return this._actionsData[this.savedSearchCategory];
                }
            });

        })();
    </script>
</dom-module>
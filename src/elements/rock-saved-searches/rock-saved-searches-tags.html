<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../pebble-button/pebble-button.html">
<dom-module id="rock-saved-searches-tags">
    <template>
        <style include="pebble-styles-shared">
            pebble-button.action {
                display: inline-block;

                --pebble-button: {  
                    height: 30px !important;                
                    border-left: 1px solid var(--palette-cerulean);
                    border-top: 1px solid var(--palette-cerulean);
                    border-bottom: 1px solid var(--palette-cerulean);
                    color: var(--palette-cerulean);                                       
                    font-size: var(--default-font-size, 14px);
                }
                --pebble-button-iron-icon: {
                    padding: 0 5px 0 0;
                }
                --pebble-menu-button: {
                    height: 30px !important;
                    border-top: 1px solid var(--palette-cerulean);
                    border-right: 1px solid var(--palette-cerulean);
                    border-bottom: 1px solid var(--palette-cerulean);
                    background: #FFFFFF;    
                    box-sizing: border-box;           
                }
                --actions-icon-button:{
                     height: 16px;
                     width: 16px;                    
                     background: #FFFFFF;
                     color: var(--palette-cerulean);
                     padding: 0 !important;
                     margin: 0 5px;
                     top:-2px;
                }
                --pebble-button-paper-menu:{
                    background: #FFFFFF;
                }
                --pebble-button-paper-menu-item: {
                    background: #FFFFFF;
                    color: var(--palette-cerulean);
                    padding: 0px 8px;
                }                        
            }
        </style>
        <template is="dom-repeat" items="[[_savedSearchesButtons]]" as="savedSearch">
           <pebble-button class="action" noink raised action-menu elevation="0" horizontal-align="right" vertical-align="top"
                  icon="[[savedSearch.icon]]" button-text="[[savedSearch.name]]" data="[[savedSearch]]" actions-data="[[_getActionData(_actionsData)]]">
            </pebble-button>
        </template>        
        <iron-ajax auto url="/src/data/savedSearchActions.json" handle-as="json" last-response="{{_actionsData}}"></iron-ajax>        
    </template>
    <script>
        (function() {
            'use strict';

            Polymer({
                
                is: 'rock-saved-searches-tags',

                properties: {
                    /*
                     * This property represents the name of the saved search category for which the tags has to be loaded
                     */
                    savedSearchCategory: {
                        type: String
                    },

                    /**
                     * Indicates saved searches
                     */
                    savedSearches: {
                        type : Object,
                        notify : true,
                        value : function(){return {}},
                        observer: '_loadSavedSearches'
                    },
                    _savedSearchesButtons: {
                        type: Array,
                        notify: true,
                        value:function(){return []},
                    },
                    _actionsData: {
                        type : Object,
                        notify : true,
                        value : function(){return {}}
                    }
                },
                _loadSavedSearches: function() {
                    if (this.savedSearches) {
                        this._savedSearchesButtons = this.savedSearches[this.savedSearchCategory];
                    }
                },
                _getActionData: function() {
                    return this._actionsData[this.savedSearchCategory];
                }
            });

        })();
    </script>
</dom-module>
<!doctype html>

<html>
  <head>
    <title>rock-tag-filter test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="../../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../../bower_components/web-component-tester/browser.js"></script>
    <link rel="import" href="../../../../bower_components/iron-demo-helpers/demo-pages-shared-styles.html"/>
    <link rel="import" href="../rock-tag-filter.html"/>
  </head>
  <body>

    <test-fixture id="rock-tag-filter">
      <template>        
        <rock-tag-filter></rock-tag-filter>
      </template>
    </test-fixture>   
        
    <script>
        suite('tag-filter', function() {
          var tagFilter;
            var filterConfig = [
                {
                    "name":"cpimProductName",
                    "longName":"Product Name",
                    "displayType":"textBox"
                },
                {
                    "name": "csapDescriptionOfNart",
                    "longName": "Nart Description",
                    "displayType":"textArea"
                }];
          setup(function() {
            tagFilter = fixture('rock-tag-filter');
            tagFilter.filters = filterConfig;
          });

          test('instantiating the rock-tag-filter works', function() {
              assert.equal(tagFilter.is, 'rock-tag-filter');            
          });
          
          test('no. of items in the dropdown match with the no. of items given in config', function() {
               Polymer.dom.flush();
               var paperItems = document.getElementsByTagName('paper-item');                              
               assert.equal(paperItems.length, 2);               
          });
            test("should fire search-tag-filter event on selecting tag item", function (done) {
                tagFilter.addEventListener('bedrock-event', function(event) {
                    assert.equal(event.detail.name, 'search-tag-filter');
                    assert.equal(event.detail.data, filterConfig[0]);
                    done();
                });
                var papermenu=document.querySelector("paper-menu");
                papermenu.select(0);
            });
        });
    </script>
  </body>
</html>

<!Doctype html>
<html>

<head>
    <title>pebble-lov demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script>
        // Setup Polymer options
        window.Polymer = {
            dom: 'shadow',
            lazyRegister: true
        };

        // Load webcomponentsjs polyfill if browser does not support native Web Components
        (function () {
            'use strict';
            var onload = function () {
                // For native Imports, manually fire WebComponentsReady so user code
                // can use the same code path for native and polyfill'd imports.
                if (!window.HTMLImports) {
                    document.dispatchEvent(
                        new CustomEvent('WebComponentsReady', {
                            bubbles: true
                        })
                    );
                }
            };

            var webComponentsSupported = (
                'registerElement' in document &&
                'import' in document.createElement('link') &&
                'content' in document.createElement('template')
            );

            if (!webComponentsSupported) {
                var script = document.createElement('script');
                script.async = true;
                script.src = '/bower_components/webcomponentsjs/webcomponents-lite.js';
                script.onload = onload;
                document.head.appendChild(script);
            } else {
                onload();
            }
        })();
    </script>
    <link rel="import" href="/bower_components/polymer/polymer.html">
    <link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
    <link rel="import" href="/bower_components/iron-demo-helpers/demo-pages-shared-styles.html">
    <link rel="import" href="/bower_components/iron-demo-helpers/demo-snippet.html">
    <link rel="import" href="/bower_components/iron-label/iron-label.html">
    <link rel="import" href="/src/elements/pebble-button/pebble-button.html">
    <link rel="import" href="/src/elements/pebble-popover/pebble-popover.html">
    <link rel="import" href="/src/elements/pebble-lov/pebble-lov.html">
    <style is="custom-style" include="demo-pages-shared-styles">
        pebble-button.icon-text-button {
            --pebble-button: {
                height: 30px;
                padding: 0.5em 0em 0.5em 0em;
                border: 1px solid #036BC3;
            }
            --pebble-button-iron-icon: {
                height: 18px;
                width: 18px;
                padding-bottom: 2px;
            }
        }
        
        .container {
            display: flex;
        }
        
        .col {
            width: 20%;
            margin-right: 5%;
        }
    </style>
</head>

<body>
    <span id="browser-sync-binding"></span>
    <div>
        <h3>A pebble LOV control in static mode with single-select as enabled</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <div class="container">
                    <div class="col">
                        <pebble-lov id="staticSingleSelectLov" items="{{items}}" show-image>
                        </pebble-lov>
                    </div>
                    <div class="col">
                        SelectedItem:
                        <iron-label id="staticSingleSelectedItemLabel"></iron-label>
                    </div>
                </div>
                <script>
                    var staticSingleSelectedItemLabel = document.getElementById("staticSingleSelectedItemLabel");
                    staticSingleSelectedItemLabel.textContent = "No item selected";

                    var staticSingleSelectLov = document.getElementById("staticSingleSelectLov");
                    staticSingleSelectLov.activate();
                    staticSingleSelectLov.addEventListener('selection-changed', function (event) {
                        if (staticSingleSelectLov.selectedItem) {
                            staticSingleSelectedItemLabel.textContent = staticSingleSelectLov.selectedItem.title;
                        }
                    });
                </script>
            </template>
        </demo-snippet>
        <h3>A pebble LOV control in static mode with single-select as enabled and pre-selected item</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <div class="container">
                    <div class="col">
                        <pebble-lov id="staticSinglePreSelectLov" items="{{items}}" show-image>
                        </pebble-lov>
                    </div>
                    <div class="col">
                        SelectedItem:
                        <iron-label id="staticSinglePreselectedItemLabel"></iron-label>
                    </div>
                </div>
                <script>
                    var staticSinglePreselectedItemLabel = document.getElementById("staticSinglePreselectedItemLabel");
                    staticSinglePreselectedItemLabel.textContent = "No item selected";

                    var staticSinglePreSelectLov = document.getElementById("staticSinglePreSelectLov");
                    staticSinglePreSelectLov.activate();
                    staticSinglePreSelectLov.selectedItem = {
                        "id": 5,
                        "title": "Boron",
                        "subtitle": "B",
                        "image": "/src/images/lookup-item.jpg"
                    }

                    staticSinglePreselectedItemLabel.textContent = staticSinglePreSelectLov.selectedItem.title;

                    staticSinglePreSelectLov.addEventListener('selection-changed', function (event) {
                        if (staticSinglePreSelectLov.selectedItem) {
                            staticSinglePreselectedItemLabel.textContent = staticSinglePreSelectLov.selectedItem
                                .title;
                        }
                    });
                </script>
            </template>
        </demo-snippet>
        <h3>A pebble LOV control under popover with single-select as enabled</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <div class="container">
                    <div class="col">
                        <pebble-button id="single-select-button" class="icon-text-button" icon="home" button-text="Add"></pebble-button>
                        <pebble-popover id="single-select-popover" for="single-select-button" auto-fit-on-attach no-overlap>
                            <pebble-lov id="single-select-lov" items="{{items}}" show-image>
                            </pebble-lov>
                        </pebble-popover>
                    </div>
                    <div class="col">
                        SelectedItem:
                        <iron-label id="single-selected-item-label"></iron-label>
                    </div>
                </div>
                <script>
                    var singleSelectButton = document.getElementById("single-select-button");

                    var singleSelectLov = document.getElementById("single-select-lov");
                    var singleSelectPopOver = document.getElementById("single-select-popover");

                    var singleSelectedItemLabel = document.getElementById("single-selected-item-label");
                    singleSelectedItemLabel.textContent = "No item selected";

                    singleSelectButton.addEventListener('click', function () {
                        if (!singleSelectLov.opened && !singleSelectPopOver.isopen) {
                            singleSelectLov.activate();
                            singleSelectPopOver.show();
                        } else {
                            singleSelectPopOver.hide();
                        }
                    })

                    singleSelectLov.addEventListener('selection-changed', function (event) {
                        if (singleSelectLov.selectedItem) {
                            singleSelectedItemLabel.textContent = singleSelectLov.selectedItem.title;
                        }

                        if (singleSelectPopOver.isopen) {
                            singleSelectPopOver.hide();
                        }
                    });
                </script>
            </template>
        </demo-snippet>
        <h3>A pebble LOV control in static mode with multi-select as enabled</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <div class="container">
                    <div class="col">
                        <pebble-lov id="static-multi-select-lov" items="{{items}}" multi-select show-image>
                        </pebble-lov>
                    </div>
                    <div class="col">
                        SelectedItems:
                        <iron-label id="static-multi-selected-item-label"></iron-label>
                    </div>
                </div>
                <script>
                    var staticMultiSelectedItemLabel = document.getElementById("static-multi-selected-item-label");
                    staticMultiSelectedItemLabel.textContent = "No item selected";

                    var staticMultiSelectLov = document.getElementById("static-multi-select-lov");
                    staticMultiSelectLov.activate();
                    staticMultiSelectLov.selectedItemIds = [10, 20];
                    staticMultiSelectLov.addEventListener('selection-changed', function (event) {
                        if (staticMultiSelectLov.selectedItems) {
                            var selectedItemsText;
                            for (var i = 0; i < staticMultiSelectLov.selectedItems.length; i++) {
                                if (selectedItemsText) {
                                    selectedItemsText += staticMultiSelectLov.selectedItems[i].title + ",";
                                } else {
                                    selectedItemsText = staticMultiSelectLov.selectedItems[i].title
                                }
                            }
                            staticMultiSelectedItemLabel.textContent = selectedItemsText;
                        }
                    });
                </script>
            </template>
        </demo-snippet>
        <h3>A pebble LOV control under popover with multi-select as enabled</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <div class="container">
                    <div class="col">
                        <pebble-button id="multi-select-button" class="icon-text-button" icon="home" button-text="Add"></pebble-button>
                        <pebble-popover id="multi-select-popover" for="multi-select-button" auto-fit-on-attach no-overlap>
                            <pebble-lov id="multi-select-lov" items="{{items}}" multi-select show-image>
                            </pebble-lov>
                        </pebble-popover>
                    </div>
                    <div class="col">
                        SelectedItems:
                        <iron-label id="multi-selected-item-label"></iron-label>
                    </div>
                </div>
                <script>
                    var multiSelectButton = document.getElementById("multi-select-button");
                    var multiSelectLov = document.getElementById("multi-select-lov");
                    var multiSelectPopover = document.getElementById("multi-select-popover");

                    multiSelectLov.selectedItems = [{
                        "id": 5,
                        "title": "Boron",
                        "subtitle": "B",
                        "image": "/src/images/lookup-item.jpg"
                    }, {
                        "id": 12,
                        "title": "Magnesium",
                        "subtitle": "Mg"
                    }];

                    var multiSelectedItemLabel = document.getElementById("multi-selected-item-label");
                    showSelectedItems(multiSelectLov.selectedItems);

                    multiSelectButton.addEventListener('click', function () {
                        if (!multiSelectLov.opened && !multiSelectPopover.isopen) {
                            multiSelectLov.activate();
                            multiSelectPopover.show();
                        } else {
                            multiSelectPopover.hide();
                        }
                    })

                    multiSelectLov.addEventListener('selection-changed', function (event) {
                        showSelectedItems(multiSelectLov.selectedItems);
                    });

                    function showSelectedItems(selectedItems) {
                        if (selectedItems) {
                            var selectedItemsText;
                            for (var i = 0; i < multiSelectLov.selectedItems.length; i++) {
                                if (selectedItemsText) {
                                    selectedItemsText += multiSelectLov.selectedItems[i].title + ",";
                                } else {
                                    selectedItemsText = multiSelectLov.selectedItems[i].title
                                }
                            }
                            multiSelectedItemLabel.textContent = selectedItemsText;
                        }
                    }
                </script>
            </template>
        </demo-snippet>
    </div>
</body>

</html>
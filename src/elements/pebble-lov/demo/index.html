<!Doctype html>
<html>

<head>
    <title>pebble-lookup demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script>
        // Setup Polymer options
        window.Polymer = {
            dom: 'shadow',
            lazyRegister: true
        };

        // Load webcomponentsjs polyfill if browser does not support native Web Components
        (function () {
            'use strict';
            var onload = function () {
                // For native Imports, manually fire WebComponentsReady so user code
                // can use the same code path for native and polyfill'd imports.
                if (!window.HTMLImports) {
                    document.dispatchEvent(
                        new CustomEvent('WebComponentsReady', {
                            bubbles: true
                        })
                    );
                }
            };

            var webComponentsSupported = (
                'registerElement' in document &&
                'import' in document.createElement('link') &&
                'content' in document.createElement('template')
            );

            if (!webComponentsSupported) {
                var script = document.createElement('script');
                script.async = true;
                script.src = '/bower_components/webcomponentsjs/webcomponents-lite.js';
                script.onload = onload;
                document.head.appendChild(script);
            } else {
                onload();
            }
        })();
    </script>
    <link rel="import" href="/bower_components/polymer/polymer.html">
    <link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
    <link rel="import" href="/bower_components/iron-demo-helpers/demo-pages-shared-styles.html">
    <link rel="import" href="/bower_components/iron-demo-helpers/demo-snippet.html">
    <!--<link rel="import" href="../pebble-combo-box.html">-->
    <link rel="import" href="/bower_components/iron-label/iron-label.html">
    <link rel="import" href="/src/elements/pebble-button/pebble-button.html">
    <link rel="import" href="/src/elements/pebble-popover/pebble-popover.html">
    <link rel="import" href="/src/elements/pebble-lookup/pebble-lov.html">
    <link rel="import" href="../pebble-lookup.html">
    <style is="custom-style" include="demo-pages-shared-styles">
        pebble-button.icon-text-button {
            --pebble-button: {
                height: 30px;
                padding: 0.5em 0em 0.5em 0em;
                border: 1px solid #036BC3;
            }
            --pebble-button-iron-icon: {
                height: 18px;
                width: 18px;
                padding-bottom: 2px;
            }
        }
    </style>
</head>

<body>
    <span id="browser-sync-binding"></span>
    <div>
        <!--<h3>A pebble-lookup with Single-Select as Enabled</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <pebble-lookup id="single-select-pebble-lookup" items="{{items}}" multi-selection="false"></pebble-lookup>
            </template>
        </demo-snippet>-->
        <!--<h3>A pebble-lookup with Multi-Select as Enabled</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <pebble-lookup id="multi-select-pebble-lookup" items="{{items}}" multi-selection="true"></pebble-lookup>
            </template>
        </demo-snippet>-->
        <!--<h3>A pebble-lookup with Single-Select as Enabled and Pre-Selected Values</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <pebble-lookup id="single-pre-select-pebble-lookup" items="{{items}}" multi-selection="false"></pebble-lookup>
                <script>
                    var selectedItem = {
                        'name': 'Boron',
                        'symbol': 'B',
                        'number': 5
                    };
                    var singleSelectPebbleLookup = document.querySelector('#single-pre-select-pebble-lookup');
                    singleSelectPebbleLookup.selectedItem = selectedItem;
                </script>
            </template>
        </demo-snippet>
        <h3>A pebble-lookup with Multi-Select as Enabled and Pre-Selected Values</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <pebble-lookup id="multi-pre-select-pebble-lookup" items="{{items}}" multi-selection="true"></pebble-lookup>
                <script>
                    var selectedItems = [{
                            "name": "Iron",
                            "symbol": "Fe",
                            "number": 26
                        }, {
                            "name": "Cobalt",
                            "symbol": "Co",
                            "number": 27
                        }];
                    var multiSelectPebbleLookup = document.querySelector('#multi-pre-select-pebble-lookup');
                    multiSelectPebbleLookup.selectedItems = selectedItems;
                </script>
            </template>
        </demo-snippet>-->
        <h3>A pebble-lookup with Multi-Select as Enabled</h3>
        <demo-snippet>
            <template is="dom-bind">
                <iron-ajax auto url="data.json" handle-as="json" last-response="{{items}}"></iron-ajax>
                <pebble-button id="button" class="icon-text-button" icon="home" button-text="Add" on-click="onPopoverClick"></pebble-button>
                <iron-label id="selectedItemLabel"></iron-label>
                <pebble-popover id="popover" for="button" auto-fit-on-attach no-overlap>
                    <pebble-lov id="overlay" items="{{items}}" multi-selection="false" show-image="true">
                    </pebble-lov>
                </pebble-popover>
                <script>
                    var button = document.getElementById("button");
                    var selectedItemLabel = document.getElementById("selectedItemLabel");
                    selectedItemLabel.textContent = "No item selected";

                    button.addEventListener('click', function () {
                        var popover = document.getElementById("popover");
                        var overlay = document.getElementById("overlay");
                        if (!overlay.opened && !popover.isopen) {
                            overlay.open();
                            popover.show();
                        } else {
                            overlay.close();
                            popover.hide();
                        }
                    })

                    overlay.addEventListener('selection-changed', function () {
                        selectedItemLabel.textContent = "SelectedItem: " + event.detail.item.title;
                        if (popover.isopen) {
                            popover.hide();
                        }
                    });
                </script>
            </template>
        </demo-snippet>
    </div>
</body>

</html>
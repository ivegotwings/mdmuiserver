<!doctype html>
<html>

<head>
	<title>rock-guideme demo</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
	<script src="../../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>

	<link rel="import" href="../../../../bower_components/iron-demo-helpers/demo-pages-shared-styles.html">
	<link rel="import" href="../../../../bower_components/iron-demo-helpers/demo-snippet.html">
	<link rel="import" href="../../../../bower_components/polymer/lib/elements/custom-style.html">

	<link rel="import" href="../../pebble-button/pebble-button.html">
	<link rel="import" href="../../pebble-popover/pebble-popover.html">
    <link rel="import" href="../../pebble-icons/pebble-icons.html">
	<link rel="import" href="../../bedrock-pubsub/bedrock-pubsub.html">
	<link rel="import" href="../rock-guideme.html">

	<custom-style>
	<style include="demo-pages-shared-styles">
		pebble-popover {
			--pebble-popover-width: 300px;									
		}
		pebble-popover div {
			margin: 10px;
		}
		rock-guideme {
			--inner-popover-margin-left: -40px;
		}
		pebble-button 
		{
            height: 30px; 
            padding: 0.5em 0em 0.5em 0em;
            min-width: 3em;
			border-radius: 3px;
            background-color:#eaeaea;
        }		
	</style>
	</custom-style>
</head>

<body>
	<span id="browser-sync-binding"></span>
	<div class="vertical-section-container centered" style="max-width:800px;">
		<h3>A rock-guideme</h3>
		<demo-snippet>
			<template is="dom-bind" id="demo-app">
				<pebble-button id="simpleButton" button-text="GUIDE ME" onclick="buttonpopover.show()" raised></pebble-button>
				<pebble-popover id="buttonpopover" for="simpleButton" no-overlap>
					<div>
						<rock-guideme id="guideme" selected-items="{{selectedItems}}"></rock-guideme>						
					</div>
				</pebble-popover>								
				<bedrock-pubsub on-bedrock-event-guideme-save="saveTap"></bedrock-pubsub>
				<bedrock-pubsub on-bedrock-event-guideme-cancel="cancelTap"></bedrock-pubsub>
				<bedrock-pubsub on-bedrock-event-guideme-variant-save="variantSaveTap"></bedrock-pubsub>				
				<p>Selected Items: {{stringify(selectedItems)}}</p>
			</template>
			<script>   
					var template = document.querySelector("#demo-app");                 
                    template.saveTap = function(e, detail, sender) {
						alert("Save event triggered: " + JSON.stringify(detail));                    
                     }

					 template.cancelTap = function(e, detail, sender) {						
                        alert("Cancel event triggered: " + JSON.stringify(detail));
                     }

					 template.variantSaveTap = function(e, detail, sender) {						
                        alert("Variant save event triggered: " + JSON.stringify(detail));
                     }

					 template.stringify = function (obj) {
						return JSON.stringify(obj);
					 };
            </script>
		</demo-snippet>		
	</div>
	<script>
		window.addEventListener('WebComponentsReady', function(e) {
			document.querySelector("#guideme").shadowRoot.querySelector("#guideme-ajax").url = "../demo/guideme-data.json";
		});
	</script>
</body>
</html>
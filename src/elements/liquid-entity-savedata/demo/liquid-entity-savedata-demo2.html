<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../liquid-entity-getdata/liquid-entity-getdata.html">
<link rel="import" href="../liquid-entity-savedata.html">
<dom-module id="liquid-entity-savedata-demo2">
    <template>
        <liquid-entity-getdata id="entityGetData3" auto log-internal-detail operation="getentities" request={{request}} response={{entities}}></liquid-entity-getdata>
        <liquid-entity-savedata log-internal-detail auto name="attributeSaveDataService" operation="updateentities" 
                request="{{entities.content}}" response="{{saveResponse}}" on-response="onSaveResponse"></liquid-entity-savedata>
    </template>
    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'liquid-entity-savedata-demo2',
                properties: {
                    request: {
                        type: Object,
                        value: function () {
                            return {
                                "data": {
                                    "query": {
                                        "ctx": [{
                                            "list": "productMaster",
                                            "classification": "nivea/niveaBodyCare/niveaBody/nbodyEssential/nbody/ess/nourishingMilkDry"
                                        }],
                                        "valCtx": [{
                                            "source": "SAP",
                                            "locale": "en-US"
                                        }],
                                        "id": "e1",
                                        "filters": {
                                            "attributesCriterion": [],
                                            "typesCriterion": [
                                                "nart"
                                            ]
                                        }
                                    },
                                    "fields": {
                                        "ctxTypes": [
                                            "properties"
                                        ],
                                        "attributes": [
                                            "cpimProductName",
                                            "csapDescriptionOfNart"
                                        ],
                                        "relationships": [
                                            "ALL"
                                        ]
                                    }
                                }
                            };
                        },
                        notify: true
                    },
                    entities: {
                        type: Object,
                        value: function () {
                            return {};
                        },
                        notify: true,
                        observer: '_entitiesRecieved'
                    },
                    saveResponse: {
                        type: Object,
                        value: function () {
                            return {};
                        },
                        notify: true
                    }
                },
                _entitiesRecieved: function () {
                    console.log('entities received', this.entities);
                },
                onSaveResponse: function (response) {
                    console.log(JSON.stringify(response));
                }
            });
        })();
    </script>
</dom-module>
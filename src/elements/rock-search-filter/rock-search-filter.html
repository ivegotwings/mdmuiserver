<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../pebble-dropdown/pebble-dropdown.html">
<link rel="import" href="../rock-tags/rock-tags.html">

<dom-module id="rock-search-filter">
  <template>
    <style include="shared-styles"></style>
    <style>
      paper-menu-button {
        display: inline-block;

         /*temporary code*/
        position: relative;
        top: -12px;
      }
    </style>
    
    <!--<pebble-dropdown id="attribute-dropdown" label="Attributes" items="Brand,Color,Size,Name,Width,Length,Height"
      on-change="_dropdownValueChanged">
    </pebble-dropdown>-->
    <div align="left">
      <paper-menu-button>
        <paper-icon-button icon="filter-list" class="dropdown-trigger"></paper-icon-button>
        <paper-menu class="dropdown-content" on-iron-select="_dropdownValueChanged">
          <paper-item>Brand</paper-item>
          <paper-item>Color</paper-item>
          <paper-item>Size</paper-item>
          <paper-item>Name</paper-item>
          <paper-item>Stone Type</paper-item>
          <paper-item>Length</paper-item>
          <paper-item>Height</paper-item>
        </paper-menu>
      </paper-menu-button>
    
      <rock-tags id="filter-tags" tags="{{tags}}"></rock-tags>
    </div>
  </template>
  <script>

  Polymer({

    is: 'rock-search-filter',

    properties: {
      tags:{
        type:Array,
        notify: true,
        value:function(){return []},
      }
    },

    // Element Lifecycle

    ready: function() {
      // `ready` is called after all elements have been configured, but
      // propagates bottom-up. This element's children are ready, but parents
      // are not.
      //
      // This is the point where you should make modifications to the DOM (when
      // necessary), or kick off any processes the element wants to perform.
    },

    attached: function() {
      // `attached` fires once the element and its parents have been inserted
      // into a document.
      //
      // This is a good place to perform any work related to your element's
      // visual state or active behavior (measuring sizes, beginning animations,
      // loading resources, etc).
    },

    detached: function() {
      // The analog to `attached`, `detached` fires when the element has been
      // removed from a document.
      //
      // Use this to clean up anything you did in `attached`.
    },

    // Element Behavior
    _dropdownValueChanged: function(e) {
      //var attributeName = this.$$("#attribute-dropdown").selectedValue;
      var attributeName = this.$$('paper-menu').selectedItem.innerText;
      var tag = {
        "name": attributeName,
        "value": "",
        "editMode": false
      };
      this.$$("#filter-tags ").addTag(tag);
      
    }

  });

</script>
</dom-module>
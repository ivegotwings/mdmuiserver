<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../bedrock-app-behavior/bedrock-app-behavior.html">
<link rel="import" href="../rock-layout/rock-layout.html">
<link rel="import" href="../rock-layout/rock-titlebar/rock-titlebar.html">
<link rel="import" href="../pebble-templatizer/pebble-templatizer.html">
<link rel="import" href="../rock-cms-viewer/rock-cms-viewer.html">

<dom-module id="app-preview">
    <template>
        <style>
            rock-layout {
                --rock-footer-background-color: #f5f7f9;
            }
        </style>
        <rock-layout>
            <rock-cms-viewer context-data="[[contextData]]" entity-type="[[entityType]]" entity-id="[[entityId]]"></rock-cms-viewer>
        </rock-layout>
    </template>
    <script>
        (function () {
            'use strict';
            Polymer({
                is: 'app-preview',
                created: function () {},
                properties: {
                    appConfig: {
                        type: Object,
                        value: function () {
                            return {};
                        }
                    },
                    dataModel: {
                        type: Object,
                        value: function () {
                            return {};
                        }
                    },
                    rendercms: {
                        type: Boolean,
                        value: false
                    }
                },
                behaviors: [
                    RUFBehaviors.AppBehavior
                ],
                ready: function () {
					let state = DataHelper.getStateFromQueryParams();
                    this.contextData = state.contextData;
					this.entityType = state._entityType;
					this.entityId = state._entityId;
                },
                _onComponentCreating: function (e, detail, sender) {
                    var component = detail.data;
                    component.properties["context-data"] = this.contextData;
                }
            });
        })();
    </script>
</dom-module>
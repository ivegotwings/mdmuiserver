<link rel="import" href="./my-todo-product-view.html">

<dom-module id="my-todo-detail-view">
    <template>
        <style include="shared-styles"></style>
        <style>
        </style>

        <div>
        <div>
        <div style="display:inline-block;">{{myTodo.name}}</div>
        <template is="dom-if" if="{{_areProductsMoreThanThree(myTodo.products)}}">
            <div style="display:inline-block;"> (Showing 3 of {{myTodo.numberOfTasks}} )</div>
            <div style="display:inline-block;">View All</div>
        </template>
        </div>
         <div>
            <template is="dom-if" if="{{!_areProductsMoreThanThree(myTodo.products)}}">
            <template is="dom-repeat" items="{{myTodo.products}}">
                <my-todo-product-view product = "{{item}}"> </my-todo-product-view>
            </template>
        </template>
        <template is="dom-if" if="{{_areProductsMoreThanThree(myTodo.products)}}">
            <my-todo-product-view product = "{{_getProductWithIndex(0)}}"> </my-todo-product-view>
            <my-todo-product-view product = "{{_getProductWithIndex(1)}}"> </my-todo-product-view>
            <my-todo-product-view product = "{{_getProductWithIndex(2)}}"> </my-todo-product-view>
        </template>
         </div>
        </div>



    </template>

    <script>

    Polymer({

    is: 'my-todo-detail-view',

    properties: {
         /**
         * myTodo represents the data
         */
        myTodo : {
            type : Object,
            notify: true,
             reflectToAttribute: true,
             value : {},
             observer : '_areProductsMoreThanThree'
        }
    },
    _areProductsMoreThanThree : function(products){
        if(products && products.length > 3) {
            return true;
        } else {
            return false;
        }
    },
    _getProductWithIndex(index) {
        if(this.myTodo.products) {
            return this.myTodo.products[index];
        }
        return {};
    }
   });

</script>
</dom-module>
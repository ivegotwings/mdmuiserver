<link rel="import" href="../pebble-elements/pebble-elements.html">
<link rel="import" href="../rock-elements/rock-elements.html">
<link rel="import" href="./my-todo-summary-list.html">

<dom-module id="rock-my-todos">
    <template>
        <style include="shared-styles"></style>

        <style>
			:host {
				margin-right: -15px;
				padding-bottom: 12px;
				@apply(--layout);
				@apply(--layout-horizontal);
			}


        </style>

        <rock-widget config="{{_widgetConfig}}"
                     non-closable="true" non-draggable="true" icon-buttons="[[iconButtons]]">

        </rock-widget>
    </template>

    <script>

(function() {
  'use strict';
  Polymer({

    is: 'rock-my-todos',

    properties: {
        /**
         * This property represents the list of my-todos that needs to be displayed in rock-my-todos widget.
         */
        myTodos : {
            type : Array,
             notify: true,
             reflectToAttribute: true,
             value: [],
             observer : '_dataChanged'
        },
        /**
          * This is a private property. Indicates the config that needs to be passed to rock-widget.
         */
         _widgetConfig:{
            type:Object,
            notify: true,
            value:function(){
                return {
                    "heading": "My Todo's",
                    "headerIcon": "icons:assignment",
                    "component": {
                        "name": "my-todo-summary-list",
                        "path": "../../rock-my-todos/my-todo-summary-list.html",
                        "properties": {
                            "style": "min-height:150px;min-width:600px;overflow-y:auto;",
                        }
                    }
                }
            }
         },
          			/**
          * Indicates the list of actions available in "more" icon on top right corner of the card.
          *
					*/
          iconButtons: {
            type: Array,
            value: function() { return [
                            {"name" : "settings","label" : "Settings"},
                            {"name" : "help","label" : "Help"}
                            ] }
          }
        },

        /**
         * This is an internal function, invoked when there is any change in the my-todos list.
         */
        _dataChanged : function() {
            if(this._widgetConfig) {
                this._widgetConfig.component.properties.list=this.myTodos;
            }
        }

    });
  })();

</script>
</dom-module>
<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<dom-module id="my-todo-summary">
    <template>
        <style include="pebble-styles-shared">
            .list-item {
                -webkit-flex-wrap:nowrap; /* Safari 6.1+ */
                flex-wrap: nowrap;
                cursor: var(--list-item-cursor, pointer);
            }            
            .content-div {
                width: calc( 100% - 210px);
            } 
            .sub-content {
               width: 130px;
            }         
            .circle {
                width: 42px;
                height: 42px;
                text-align: center;
                border-radius: 50%;
                border: 1px solid var(--palette-dark-two);
                line-height: 42px;
                color: var(--palette-dark);
                font-size: var(--font-size-sm);
                margin: 0 10px;
                text-overflow: ellipsis;
                overflow: hidden;
                white-space:nowrap;
            }            
            .todo-status {
                width: 7px;
                min-height: 56px;
            }            
            .border-left-1 {
                background: rgba(237, 30, 75, 0.3);
            }            
            .border-left-2 {
                background: rgba(18, 156, 230, 0.3);
            }            
            .border-left-3 {
                background: rgba(54, 179, 73, 0.3);
            }
        </style>
        <div class="list-item row layout-middle" on-tap="_onTapEvent">
            <div class$="{{_computeClass(myTodo.status)}} todo-status"></div>
            <div class="circle">[[myTodo.numberOfTasks]]</div>
            <div class="content-div list-content">
                <div class="to-do-name block-text">[[myTodo.name]]</div>
                <div class="to-do-body">Workflow : [[myTodo.workflow]]</div>
            </div>
            <div class="sub-content text-right m-r-10">
                <div>[[myTodo.unAssigned]] Unassigned</div>
                <div>[[myTodo.assignedToMe]] With Me</div>
            </div>
            <div class="clearfix"></div>
        </div>
    </template>
    <script>
        Polymer({

            is: 'my-todo-summary',

            properties: {

                /**
                 * Fired when any of the my-todo is tapped in my-todo's widget with event name: "rock-my-todo-click" and data is the data of the clicked my-todo
                 *
                 * @event bedrock-event
                 */

                /**
                 * myTodo represents the data
                 */
                myTodo: {
                    type: Object,
                    notify: true,
                    value: {}
                }
            },

            /**
             *  This s internal function used to compute the class based on the status of my-todo
             */
            _computeClass: function (status) {
                if (status) {
                    if (status == "red") {
                        return 'border-left-1';
                    } else if (status == "orange") {
                        return 'border-left-2';
                    } else {
                        return 'border-left-3';
                    }
                }
                return 'border-left-3';
            },

            /**
             * This is internal function used to fire an rock-my-todo-click when my-todo element is tapped
             */
            _onTapEvent: function (e) {
                var eventData = {
                    name: "rock-my-todo-click",
                    data: this.myTodo
                }
                this.fire('bedrock-event', eventData)
            }
        });
    </script>
</dom-module>
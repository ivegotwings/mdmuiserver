<!--
`bedrock-helpers` Represents a bunch of helpers that any bedrock, pebble, rock or app can use. 
-->
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../bedrock-helpers/data-helper.html">
<link rel="import" href="../bedrock-helpers/data-merge-helper.html">
<link rel="import" href="../liquid-dataobject-utils/liquid-dataobject-utils.html">

<script>
    EntityHelper = {};

    (function () {

        EntityHelper.getAllAttributes = function (entity) {
            var attributes = {};
            if (entity) {
                if (entity.data) {
                    if (entity.data.attributes) {
                        attributes = DataMergeHelper.mergeAttributes(attributes, entity.data.attributes, true);
                    }

                    if (entity.data.contexts) {
                        entity.data.contexts.forEach(function (element) {
                            if (element && element.attributes) {
                                attributes = DataMergeHelper.mergeAttributes(attributes, element.attributes, true);
                            }
                        }, this);
                    }
                }
            }

            return attributes;
        };

        EntityHelper.getRelationshipsBasedOnContext = function (entity, dataContext) {
            var relationships = {};
            if (entity && entity.data) {
                if (!_.isEmpty(dataContext)) {
                    if (entity.data.contexts) {
                        relationships = SharedUtils.DataObjectFalcorUtil.getRelationshipsByCtx(entity, dataContext);
                    }

                } else {
                    if (entity.data.relationships) {
                        relationships = entity.data.relationships;
                    }
                }
            }

            return relationships;
        };

    })();

</script>
<!--
`bedrock-helpers` Represents a bunch of helpers that any bedrock, pebble, rock or app can use. 
-->
<!--<link rel="import" href="../../../bower_components/polymer/polymer.html">-->

<script>
    window.FormatHelper = window.FormatHelper || {};

    (function () {

        FormatHelper.convertFromISODateTime = function(date, dataType, format){
           dataType = dataType.toLowerCase();

           if( date && 
              (dataType == "datetime" || dataType == "date"))
           {
               var isoFormat = dataType == "datetime" ? FormatHelper.getISODateTimeFormat(date) : "YYYY-MM-DD";

               if(!format)
               {
                   format = dataType == "datetime" ? "MM/DD/YYYY hh:mm:ss A" : "MM/DD/YYYY";
               }

               var _convertedDate = moment(date.toString().toUpperCase(), isoFormat, true).format(format);

               if(_convertedDate == "Invalid date")
               {
                   return date;
               }

               return _convertedDate;
           }
       };

       FormatHelper.convertFromISODateTimeToClientFormat = function(date, dataType, format){
           dataType = dataType.toLowerCase();

           if( date && 
              (dataType == "datetime" || dataType == "date"))
           {
               //var isoFormat = dataType == "datetime" ? FormatHelper.getISODateTimeFormat(date) : "YYYY-MM-DD";

               if(!format)
               {
                   format = dataType == "datetime" ? "MM/DD/YYYY hh:mm:ss A" : "MM/DD/YYYY";
               }

               var _convertedDate = moment(date.toString().toUpperCase()).format(format);

               if(_convertedDate == "Invalid date")
               {
                   return date;
               }

               return _convertedDate;
           }
       };

       FormatHelper.getISODateTimeFormat = function(isoDate) {
            // Default format & offset
            var format = "YYYY-MM-DDTHH:mm:ss.SSS";
            var offset = "-0500";
            if(isoDate) {
                var date = isoDate.toString().toUpperCase();
                var dateWithoutOffset = date.substring(0, date.length - offset.length);
                var dateOffset = date.substring(date.length - offset.length, date.length);
                if(moment(dateWithoutOffset, format, true).isValid()) {
                    return format + dateOffset;
                }
            }
            return format + offset;
       };

    })();

</script>
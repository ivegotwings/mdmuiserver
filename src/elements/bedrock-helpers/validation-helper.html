<!--
`validation-helpers` Represents a bunch of helpers to work with validations that any bedrock, pebble, rock or app can use.
-->
<!--<link rel="import" href="../../../bower_components/polymer/polymer.html">-->
<script>
    window.ValidationHelper = window.ValidationHelper || {};
    (function() {
        ValidationHelper.requiredValidator=function(input) {
            return (input != undefined && input != "");
        };

        ValidationHelper.minLengthValidator=function(input, length) {
            return input.length >= length;
        };

        ValidationHelper.maxLengthValidator=function(input, length) {
            return input.length <= length;
        };

        ValidationHelper.numberRangeValidator=function(value, min, max, minInclusive, maxInclusive) {
            if (isNaN(value)) {
                if (ValidationHelper.isFraction(value)) {
                    var split = value.split('/');
                    if (!isNaN(split[0]) && !isNaN(split[1])) {
                        value = parseInt(split[0]) / parseInt(split[1]);
                    }
                } else {
                    return false;
                }
            }
            if (isNaN(min)) {
                return maxInclusive ? value <= Number(max) : value < Number(max);
            } else if (isNaN(max)) {
                return minInclusive ? value >= Number(min) : value > Number(min);
            }

            var _isMinValid = minInclusive ? value >= Number(min) : value > Number(min);
            var _isMaxValid = maxInclusive ? value <= Number(max) : value < Number(max);

            return _isMinValid && _isMaxValid;
        };

        ValidationHelper.emailValidator=function(input) {
            var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return regex.test(input);
        };

        ValidationHelper.regexValidator=function(input, pattern) {
            var regExp = new RegExp(pattern);
            return regExp.test(input);
        };

        ValidationHelper.integerValidator=function(input) {
            if(isNaN(input))
            {
                return false;
            }

            var _pattern = "^[0-9]+$";
            return ValidationHelper.regexValidator(input, _pattern);
        };

        ValidationHelper.decimalValidator=function(input) {
            if(isNaN(input))
            {
                return false;
            }

            return true;
        };

        ValidationHelper.booleanValidator=function(input) {
            // Input value is string, so comparing with boolean string.
            if(input == "")
            {
                return true;
            }
            if(input != null)
            {
                var lowerInputValue = input.toString().toLowerCase();
                if(lowerInputValue == "true" || lowerInputValue == "false")
                {
                    return true;
                }
            }
            return false;
        };
        
        ValidationHelper.isFraction=function(value) {
            if (isNaN(value)) {
                var split = value.split('/');
                return split.length == 2 && !isNaN(split[0]) && !isNaN(split[1]) && parseInt(split[1]) != 0;
            }
            return false;
        };

        ValidationHelper.decimalPrecisionValidator=function(input, precision) {
            var pattern = new RegExp("^-?[0-9]+(\.([0-9]{1," + precision + "})?)?$");
            return pattern.test(input);
        };

        ValidationHelper.fileExtensionValidator=function(input, allowedFiles) {
            var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(" + allowedFiles.join('|') + ")$");
            return regex.test(input);
        };

        ValidationHelper.dateRangeValidator=function(input, format, min, max, minInclusive, maxInclusive) {
            if (!min && !max) {
                return true;
            }
            var inputDate = moment(input, format);
            var minDate = moment(min, format);
            var maxDate = moment(max, format);

            if (inputDate.isValid()) {
                if (minDate.isValid() && maxDate.isValid()) {
                    var _isMinValid = minInclusive ? inputDate >= minDate : inputDate > minDate;
                    var _isMaxValid = maxInclusive ? inputDate <= maxDate : inputDate < maxDate;
                    return _isMinValid && _isMaxValid;
                } else if (minDate.isValid()) {
                    return minInclusive ? inputDate >= minDate : inputDate > minDate;
                } else if (maxDate.isValid()) {
                    return maxInclusive ? inputDate <= maxDate : inputDate < maxDate;
                }
            } else {
                return false;
            }
        };

        ValidationHelper.dateTimeValidator=function(input, type, format) {
             if(!format)
             {
                 format = type == "datetime" ? "MM/DD/YYYY hh:mm:ss A" : "MM/DD/YYYY"; 
             }

             var inputDate = moment(input, format, true);

             if(inputDate.isValid())
             {
                 return true;
             }

             return false;
        };

        ValidationHelper.getDateByFormat=function(datevalue, dateFormat) {
            if (typeof datevalue == "string") {
                return datevalue;
            }
            return moment(datevalue).format(dateFormat);
        };
    })();
</script>
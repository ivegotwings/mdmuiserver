<!--
`element-helper` Represents a bunch of helpers to work with html elements that any bedrock, pebble, rock or app can use.
-->
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<script>
    ElementHelper = {};

    (function () {
        ElementHelper.cloneObject = function (o) {
            return JSON.parse(JSON.stringify(o));
        };

        ElementHelper.getShadowElement = function (customElement) {
            var rootElement;

            if (window.Polymer.Settings.dom == "shadow") {
                rootElement = customElement.root;
            } else {
                rootElement = customElement;
            }

            return rootElement;
        };

        /**
         * Get the element from the current document
         */
        ElementHelper.getElement = function (currentNode, selector) {
            if (selector && currentNode) {
                return Polymer.dom(currentNode.root).node.querySelector(selector) ||
                    Polymer.dom(currentNode).node.querySelector(selector);
            }
        };

        ElementHelper.getRandomId = function () {
            function randomToken() {
                return Math.floor((1 + Math.random()) * 0x10000)
                    .toString(16)
                    .substring(1);
            }
            return randomToken() + randomToken() + randomToken() + randomToken();

        };

        ElementHelper.getRandomString = function () {
            var x = 2147483648;
            return Math.floor(Math.random() * x).toString(36) +
                Math.abs(Math.floor(Math.random() * x) ^ new Date().getTime()).toString(36);
        };

        ElementHelper.noBubble = function (e) {
            e = e || event;
            if (e) {
                e.returnValue = false;
                e.cancelBubble = true;
                e.stopPropagation();
                e.preventDefault();
            }
        };
        
        ElementHelper.fireClick = function (node) {
            if (document.createEvent) {
                var evt = document.createEvent('MouseEvents');
                evt.initEvent('click', true, false);
                node.dispatchEvent(evt);
            } else if (document.createEventObject) {
                node.fireEvent('onclick');
            } else if (typeof node.onclick == 'function') {
                node.onclick();
            }
        };

        ElementHelper.getElementPath = function (e) {
            var path = e.path || (e.composedPath && e.composedPath());
            if (path) {
                return path;
            }
            else {
                path = [];
                var node = e.target;
                while (node) {
                    var pathNode = node;
                    path.push(pathNode);
                    node = node.parentNode;
                }
            }
            return path;
        };
    })();

</script>
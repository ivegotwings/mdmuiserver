<!Doctype html>
<html>

<head>
    <title>rock-wizard test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <script src="/bower_components/web-component-tester/browser.js"></script>
    <script>

      // Setup Polymer options
      window.Polymer = {
        dom: 'shadow',
        lazyRegister: true
      };

      // Load webcomponentsjs polyfill if browser does not support native Web Components
      (function() {
        'use strict';
        var onload = function() {
          // For native Imports, manually fire WebComponentsReady so user code
          // can use the same code path for native and polyfill'd imports.
          if (!window.HTMLImports) {
            document.dispatchEvent(
              new CustomEvent('WebComponentsReady', {bubbles: true})
            );
          }
        };

        var webComponentsSupported = (
         'registerElement' in document
          && 'import' in document.createElement('link')
          && 'content' in document.createElement('template')
        );
        if (!webComponentsSupported) {
          var script = document.createElement('script');
          script.async = true;
          script.src = '/bower_components/webcomponentsjs/webcomponents-lite.min.js';
          script.onload = onload;
          document.head.appendChild(script);
        } else {
          onload();
        }
      })();
    </script>
    <link rel="import" href="/bower_components/polymer/polymer.html">
    <link rel="import" href="/bower_components/iron-test-helpers/iron-test-helpers.html">
    <link rel="import" href="/src/elements/bedrock-helpers/element-helper.html">
    <link rel="import" href="../rock-wizard.html">
</head>

<body>
    <test-fixture id="basic">
        <template>
            <rock-wizard></rock-wizard>
        </template>
    </test-fixture>
    <script>

      var wizard, wizardConfig; 

     wizardConfig = {
                        "stepperConfig": [
                                {
                                    "index": "1",
                                    "label": "",
                                    "status": "inprogress"
                                },
                                {
                                    "index": "2",
                                    "label": "",
                                    "status": ""
                                },
                                {
                                    "index": "3",
                                    "label": "",
                                    "status": ""
                                }
                        ],
                        "name": "create-entity",
                        "label": "Create Product",
                        "steps": [{
                            "name": "step-1-fill-initial-data",
                            "label": "Fill Data for New Entity",
                            "component": {
                                "name": "rock-entity-create",
                                "path": "/../../src/elements/rock-entity-create/rock-entity-create.html",
                                "properties": {
                                    "import-profile-name": "Entity Import - RSExcel 2.0",
                                    "attribute-names": ["cpimProductName", "csapDescriptionOfNart", "csapGenderDescriptionType", "cpimShortDescription", "cpimSkinType"]
                                }
                            },
                            "nextEvent":"onSave",
                            "skipEvent": "onCancel"
                        }, {
                            "name": "step-2-create-perspectives",
                            "label": "Create perspectives for New Entity",
                            "component": {
                                "name": "rock-entity-variant",
                                "path": "/../../src/elements/rock-entity-variant/rock-entity-variant.html",
                                "properties": {
                                }
                            },
                            "nextEvent":"onComplete",
                            "skipEvent": "onCancel"
                        }]
                    }

        suite("defaults", function() {
             
            setup(function(){
                wizard = fixture("basic");
                wizard.config = wizardConfig;
            }); 

            test("to check whether instantiating the wizard works", function(done) {
                flush(function() {
                    assert.equal(wizard.is, "rock-wizard");
                    done();
                });
            });

            test("to check whether wizard config is provided or not", function(done) {
                flush(function() {
                    assert.notEqual(wizard.config, '');
                    done();
                });
            });

            test("to check whether wizard screen is loaded or not", function(done) {
                flush(function() {
                    wizard.async(function() {
                        assert.equal(wizard.$$('#step-container').children.length, 1);
                        done();
                    }, 1000);
                });
            });

            test("to check whether stepper is loaded or not", function(done) {
                flush(function() {
                    var stepper = wizard.$$('#pebbleStepper');
                    assert.notEqual(stepper, null);
                    done();
                });
            });

            test("to check whether the stepper layout is horizontal", function(done) {
                flush(function() {
                    var stepper = wizard.$$('#pebbleStepper');
                    assert.equal(stepper.horizontal, true);
                    done();
                })
            })
        });
    </script>
</body>

</html>
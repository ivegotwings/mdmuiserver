<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../bedrock-ui-behavior/bedrock-ui-behavior.html">
<link rel="import" href="../bedrock-helpers/data-helper.html">
<link rel="import" href="../bedrock-helpers/component-helper.html">
<link rel="import" href="../bedrock-helpers/context-helper.html">
<link rel="import" href="../bedrock-pubsub/bedrock-pubsub.html">
<link rel="import" href="../bedrock-style-manager/styles/bedrock-styles-scroll-bar.html"/>
<link rel="import" href="../bedrock-style-manager/styles/bedrock-style-common.html">

<link rel="import" href="../pebble-actions/pebble-actions.html">
<link rel="import" href="../pebble-button/pebble-button.html">
<link rel="import" href="../pebble-dropdown/pebble-dropdown.html">

<dom-module id="rock-summary-details">
    <template>
        <style include="bedrock-style-common bedrock-styles-scroll-bar">
            .list-item {
                -webkit-flex-wrap: nowrap;
                /* Safari 6.1+ */
                flex-wrap: nowrap;
                cursor: var(--list-item-cursor, pointer);
                position: relative;
                padding: 10px 10px 10px 8px;
                min-height: 50px;
                overflow: hidden;
            }
            .square {
                max-width: 90px;
                height: 30px;
                text-align: center;
                line-height: 32px;
                color: var(--list-item-count-wrap-text-color, #036bc3);
                font-size: var(--font-size-lg, 18px);
                font-weight: 500;
                margin: 0 10px;
                text-overflow: ellipsis;
                overflow: hidden;
                white-space: nowrap;
            }

            .todo-status {
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                width: 8px;
            }
            .contentContainer {
                width: 150px;
                height: 50px;
            }
            .sub-content {
                position: absolute;
                right: 10px;
                top: 17px;
            }
            
            .border-left-1 {
                background: rgba(18, 156, 230, 1);
            }

            .border-left-2 {
                background: rgba(54, 180, 74, 1);
            }

            .border-left-3 {
                background: rgba(120, 93, 168, 1);
            }

            .border-left-4 {
                background: rgba(247, 142, 30, 1);
            }

            .border-left-5 {
                background: rgba(246, 212, 12, 1);
            }

            .border-left-6 {
                background: rgba(238, 32, 76, 1);
            }
        </style>

        <pebble-dropdown id="domain" label="Domain" items="Red,Blue,Green,Yellow,Orange,Black,White" selected-value="Blue"></pebble-dropdown>
        
        <template is="dom-repeat" items="[[summaryCount]]" as="summary">
            <div class="list-item row layout-middle">
                <div class$="{{_computeClass(summary.status)}} todo-status"></div>
                <div class="contentContainer">
                    <div class="row layout-middle">
                        <div id="taskCount" class="square">
                                [[summary.count]]
                        </div>
                        <div id="workflowMetadataContainer" class="content-div list-content" data="[[myTodo.workflowData]]" on-tap="_onActivityTap">
                            <div class="to-do-name block-text text-ellipsis">[[myTodo.name]]</div>
                        </div>
                        <div class="sub-content text-right">
                            <div id="viewDetails" class="btn-link">
                                [[summary.label]] &raquo;
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </template>
    <script>
        (function() {
            'use strict';

            Polymer({
                is: "rock-summary-details",

                properties: {
                    contextData: {
                        type: Object,
                        value: function() {
                            return {};
                        }
                    },
                    summaryCount:{
                        type: Array,
                        value: function() {
                            return [
                            {
                                "label": "Business Rules",
                                "count": 5,
                                "status":"red"
                            },
                            {
                                "label": "Business Conditions",
                                "count": 6,
                                "status":"orange"
                            },
                            {
                                "label": "Graph Business Rules",
                                "count": 3,
                                "status":"green"
                            },
                            {
                                "label": "Dynamic Content Generation Templates",
                                "count": 10,
                                "status":"red"
                            }
                            ];
                        }
                    }
                },
                behaviors: [
                    RUFBehaviors.UIBehavior
                ],
          
                ready: function() {
                 
                },
                _computeClass: function (status) {
                    if (status) {
                        if (status == "red") {
                            return 'border-left-1';
                        } else if (status == "orange") {
                            return 'border-left-2';
                        } else {
                            return 'border-left-3';
                        }
                    }
                    return 'border-left-3';
                },
            });
        })();
    </script>
</dom-module>

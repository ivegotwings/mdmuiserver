<!doctype html>

<html>

<head>
  <title>rock-dimension-grid tests</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

  <script src="../../../../bower_components/web-component-tester/browser.js"></script>
  <script src="../../../../bower_components/iron-test-helpers/mock-interactions.js"></script>

  <link rel="import" href="../../../../bower_components/iron-test-helpers/iron-test-helpers.html">
  <link rel="import" href="../rock-dimension-grid.html">
  <link rel="import" href="fake-liquid-entity-data-get.html">

</head>

<body>

  <test-fixture id="basic">
    <template>
      <rock-dimension-grid data-id="e6" attribute-name="ProductName"></rock-dimension-grid>
    </template>
  </test-fixture>

  <script>
      var element;
      setup(function(){
         replace('liquid-entity-data-get').with('fake-liquid-entity-data-get');
         element = fixture('basic');

         element.attributeModelObject = {
                                "displayType":"textbox",
                                "longName":"ProductName",
                                "name":"ProductName"
                            };

         element.locales = [{
              "id": 1,
              "title": "English",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 2,
              "title": "French",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 3,
              "title": "German",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 4,
              "title": "China",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 5,
              "title": "Russia",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 6,
              "title": "Dutch",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }];

         element.sources = [{
              "id": 1,
              "title": "PIM",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 2,
              "title": "SAP",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 3,
              "title": "PLM",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }];

         element.contexts = [{
              "id": 1,
              "title": "Master",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 2,
              "title": "Germany Website",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }, {
              "id": 3,
              "title": "UK Website",
              "subtitle": "",
              "image": "/src/images/lookup-item.jpg"
          }];
      });

      suite('rock-dimension-grid', function() {
        test('instantiating the dimension grid element works', function() {
            assert.equal(element.is, 'rock-dimension-grid');
        });

        test('render data for one locale and one source', function(done) {
            element._selectedLocales = ["en-US"];
            element._selectedSources = ["SAP"];
            
            flush(function(){
              var grid = Polymer.dom(element).node.$$('rock-grid');
              assert.equal(grid.data.length, 1);
              done();             
            });
        });

        test('render data for two locale and one source', function(done) {
            element._selectedLocales = ["en-US", "de-DE"];
            element._selectedSources = ["SAP"];
            
            flush(function(){
              var grid = Polymer.dom(element).node.$$('rock-grid');
              assert.equal(grid.data.length, 2);
              done();             
            });
        });

        test('render data for two locale and two source', function(done) {
            element._selectedLocales = ["en-US", "de-DE"];
            element._selectedSources = ["SAP", "PIM"];
            
            flush(function(){
              var grid = Polymer.dom(element).node.$$('rock-grid');
              assert.equal(grid.data.length, 4);
              done();             
            });
        });
     });
    </script>
</body>

</html>
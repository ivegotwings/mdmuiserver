<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../liquid-event-get.html">

<dom-module id="liquid-event-get-demo-byid-getattrs">
    <template>
        <liquid-event-get id="entityGetData3" auto$="[[auto]]" verbose operation="getbyids" request-id="req1" request-data={{request}}
            last-response={{entities}} on-response="_onEntitiesReceived" on-error="_onEntityGetFailed"></liquid-event-get>
    </template>
    <script>
        (function () {
            'use strict';
            Polymer({
                is: 'liquid-event-get-demo-byid-getattrs',
                attached: function () {
                    //var liquidElement1 = this.$$("[id=entityGetData3]");
                    //liquidElement1.generateRequest();
                },
                properties: {
                    auto: {
                        type: Boolean,
                        value: false
                    },
                    request: {
                        type: Object,
                        value: function () {
                            return {
                                "params": {
                                    "query": {
                                        "contexts": [{ "self": "self/e1", "workflow": "newProductSetup" }],
                                        "id": "78806533-350c-4e21-a662-b1d02a0bc562",
                                         "filters": {
                                            "typesCriterion":
                                            ["entitygovernevent"], "excludeNonContextual": true
                                        }
                                    }, "fields": {
                                        "attributes":
                                        ["activities"], "relationships": ["_ALL"]
                                    }, "options": { "totalRecords": 100 }
                                }
                            };
                        },
                        notify: true
                    },
                    request2: {
                        type: Object,
                        value: function () {
                            return {};
                        },
                        notify: true
                    },
                    entities: {
                        type: Object,
                        value: function () {
                            return {};
                        },
                        notify: true
                    },
                    entities2: {
                        type: Object,
                        value: function () {
                            return {};
                        },
                        notify: true
                    }
                },
                generateRequest: function () {
                    this.$$('#entityGetData3').generateRequest();
                },
                _onEntitiesReceived: function (e) {
                    console.log('entities received ', JSON.stringify(e.detail.response, null, 4));
                    //var req2 = this.request;
                    //req2.params.query.id = "entity_105";
                    //get same entity again..
                    //this.set('request2', req2);
                },
                _onEntityGetFailed: function (e) {
                    Polymer.Base._error('entities get failed with error ', e.detail);
                }
            });
        })();
    </script>
</dom-module>
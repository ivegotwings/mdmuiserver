<!doctype html>
<html lang="en">

  <head>

    <meta charset="utf-8" />
    <meta name="description" content="Riversand MDMCenter">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <title>Riversand MDMCenter</title>
    <!-- Chrome for Android theme color -->
    <meta name="theme-color" content="#2E3AA1" />
    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json" />
    <!-- Tile color for Win8 -->
    <meta name="msapplication-TileColor" content="#3372DF" />
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Riversand MDMCenter">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Polymer Starter Kit" />

    <link rel="apple-touch-icon" href="/src/images/touch/apple-touch-icon.png" />
    <link rel="shortcut icon" type="image/ico" href="/src/images/favicon.ico" />

    <!--! do not remove -->
    <script type="text/javascript" src="/src/scripts/log4javascript.js"></script>
    <script type="text/javascript" src="/src/scripts/rufLogger.js"></script>
    <script type="text/javascript" src="/src/scripts/jquery-slim.js"></script>
    
    <style>
      body {
        overflow: hidden;
        margin: 0;
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
        line-height: 1.5;
        min-height: 100vh;
        scrollbar-face-color: #c1cad4;
        scrollbar-arrow-color: #ccc;
        scrollbar-track-color: #eee;
        scrollbar-shadow-color: #c1cad4;
        display: block;
        vertical-align: middle;
      }

      [visibility-hidden] {
        display: none;
      }

      /* Scrollbar Styles Starts Chrome*/

      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-thumb {
        background: var(--palette-cloudy-blue, #c1cad4);
        border-radius: 5px;
      }

      ::-webkit-scrollbar-track {
        background: #e6eaee;
        border-radius: 5px;
      }

      /* Scrollbar Styles Starts Firefox*/

      ::-moz-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-moz-scrollbar-thumb {
        background: var(--palette-cloudy-blue, #c1cad4);
        border-radius: 5px;
      }

      ::-moz-scrollbar-track {
        background: #e6eaee;
        border-radius: 5px;
      }

      /* Scrollbar Styles Starts IE*/

      ::-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-scrollbar-thumb {
        background: var(--palette-cloudy-blue, #c1cad4);
        border-radius: 5px;
      }

      ::-scrollbar-track {
        background: #e6eaee;
        border-radius: 5px;
      }

      body[unresolved] rock-preloader[unresolved] {
        display: block;
        min-height: 101vh;
        line-height: 68px;
        text-align: center;
        font-size: 16px;
        font-weight: 600;
        letter-spacing: 0.3em;
        color: #202020;
        padding: 0 16px;
        overflow: visible;
      }
      /*Loader Styles*/

        @-webkit-keyframes indeterminate-splitter {
          0% {
            -webkit-transform: scaleX(.15) translateX(-200%);
          }
          30% {
            -webkit-transform: scaleX(.35) translateX(125%);
            -webkit-animation-timing-function: cubic-bezier(.42,0,.6,.8);
          }
          90% {
            -webkit-transform: scaleX(.5) translateX(175%);
          }
          100% {
            -webkit-transform: scaleX(1) translateX(200%);
          }
        }

      @keyframes indeterminate-splitter {
        0% {
          transform: scaleX(.15) translateX(-200%);
        }
        30% {
          transform: scaleX(.35) translateX(125%);
          animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          transform: scaleX(.5) translateX(175%);
        }
        100% {
          transform: scaleX(1) translateX(200%);
        }
      }

      #loadingText{
        font-size:18px;
        margin-bottom:10px;
      }


      #loader {
        height: 19px;
        text-align: center;
        color: #757f8a;
        position:absolute;
        top:44%;
        left:36%;
      }
      
      #progressContainer{
        width:300px;
        height:4px;
        margin:auto;
        background:#808080;
        border-radius:2px;
      }
      
      #primaryProgress
      {
       -webkit-animation: indeterminate-splitter 2s linear infinite;
       animation: indeterminate-splitter 2s linear infinite;
        width: 100px;
        height: 2px;
        padding-top:2px;
        vertical-align: middle;
        background-color: #64ffda;
        border-radius:2px;
      }
    </style>
  </head>

  <body unresolved>
    <script>
      // Force all polyfills on
      //if (window.customElements) {
      //  window.customElements.forcePolyfill = true;
      //}

      //ShadyDOM = { force: true };
      //ShadyCSS = { shimcssproperties: true };

      RUFUtilities.initializeLogger("{{tenantId}}-{{userId}}");

      // Load pre-caching Service Worker
      if ('serviceWorker' in navigator) {
        console.log('service worker would be attached');
        window.addEventListener('load', function () {
          navigator.serviceWorker.register('/service-worker.js');
        });
      }

      window.addEventListener('HTMLImportsLoaded', function(e) {
        console.log('all html imports are loaded');
      });

      window.addEventListener('WebComponentsReady', function(e) {
        console.log('all web components are ready now');

        // Polymer.RenderStatus.afterNextRender(this.$.mainAppSpinner, () => {
        //   Polymer.importHref('/src/elements/app-main/main-app.html', null, null, true);
        // });

        //Polymer.setPassiveTouchGestures(true);
      
      });
      
    </script>
    <script type="text/javascript" src="/src/scripts/webcomponents-loader.js"></script>

    <!-- 
    <link rel="import" href="/bower_components/polymer/polymer.html">

    <link rel="import" href="/src/elements/rock-preloader/rock-preloader.html">
    <rock-preloader id="mainAppSpinner" tenant-logo-text="{{tenantId}}" active="true"></rock-preloader> -->

    {{#isAuthenticated}}
    
    <link rel="import" href="/src/elements/app-main/main-app.html" async>
    <main-app visibility-hidden no-preload="{{noPreload}}" id="app" is-authenticated="{{isAuthenticated}}" tenant-id="{{tenantId}}"
      user-id="{{userId}}" role-id="{{roleId}}" full-name="{{fullName}}" user-name="{{userName}}" ownership-data="{{ownershipData}}"></main-app>
    
    {{/isAuthenticated}}

    <!-- build:js scripts/app.js -->
    <script type="text/javascript" src="/src/elements/app-main/main-app.js"></script>
    <!-- endbuild-->
    <script type="text/javascript" src="/src/scripts/fileDownloader.js"></script>
    
    <!--Loader-->
    <div id="loader">
      <span id="loadingText">Loading resources ...</span>
      <div id="progressContainer">
        <div id="primaryProgress"></div>
      </div>
    </div>
  </body>

</html>